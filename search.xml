<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SpringBoot+Mybatis框架搭建</title>
      <link href="2020/11/29/springboot-mybatis-kuang-jia-da-jian/"/>
      <url>2020/11/29/springboot-mybatis-kuang-jia-da-jian/</url>
      
        <content type="html"><![CDATA[<blockquote><p>创建SpringBoot项目</p><p>引入相关依赖</p><p>创建文件结构</p><p>修改和创建实体类</p><p>修改和创建配置文件</p><p>启动并测试</p></blockquote><p>前述：</p><p>最近在做一个博客项目，用到java Spring框架，网上参考了很多教程，但依然有些地方说的不具体，在此，将搭建过程记录一下</p><p>本博文主要参考教程：</p><p><a href="https://www.jianshu.com/p/541874714907">https://www.jianshu.com/p/541874714907</a></p><p>在此表示感谢！！！</p><h3 id="一-创建SpringBoot项目"><a href="#一-创建SpringBoot项目" class="headerlink" title="一.创建SpringBoot项目"></a>一.创建SpringBoot项目</h3><p>选择Sping Initializr</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-29%20231628.png"></p><p>Group：自定义组名</p><p>Artifact: 自定义项目名</p><p>Language: 选择java语言</p><p>Packaging: 选择jar包</p><p>Java Version：选择8</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-29%20231748.png"></p><p>直接下一步</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-29%20231815.png"></p><p>自定义文件保存路径</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-30%20075357.png"></p><p>将下面的配置添加到pom.xml文件中</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>--web核心依赖--<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework.boot<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-boot-starter-web<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span>--mysql数据库驱动--<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>mysql<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mysql-connector-java<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span>runtime<span class="token operator">&lt;</span>/scope<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span>--mybatis--<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.mybatis.spring.boot<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mybatis-spring-boot-starter<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>     <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">2.1</span>.<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/version<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>首次导入会报错，此时将鼠标放到红色报错位置右击—&gt;Maven—&gt;reImport</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-29%20232030.png"></p><h3 id="三-创建文件结构"><a href="#三-创建文件结构" class="headerlink" title="三.创建文件结构"></a>三.创建文件结构</h3><p>创建如下的文件结构</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-29%20231547.png"></p><h3 id="四-修改和创建实体类"><a href="#四-修改和创建实体类" class="headerlink" title="四.修改和创建实体类"></a>四.修改和创建实体类</h3><p>编写实体类com.xmy.demo.mybatis.entity.User</p><pre class="line-numbers language-none"><code class="language-none">package com.xmy.demo.mybatisdemo.entity;import java.io.Serializable;public class User implements Serializable {    private Long id;//编号    private String username;//用户名    private String password;//密码        //get和set方法可通过右击，分别选择getter、setter、toString方法    //get方法    public Long getId() {        return id;    }    public String getUsername() {        return username;    }    public String getPassword() {        return password;    }    public void setId(Long id) {        this.id = id;    }    //set方法    public void setUsername(String username) {        this.username = username;    }    public void setPassword(String password) {        this.password = password;    }    //toString方法    @Override    public String toString() {        return "User{" +                "id=" + id +                ", username='" + username + '\'' +                ", password='" + password + '\'' +                '}';    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编写接口com.xmy.demo.mybatis.mapper.UserMapper</p><p><strong>注意</strong>：需要使用@Mapper注解，不然SpringBoot无法扫描</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@Mapper//指定这是一个操作数据库的mapperpublic interface UserMapper <span class="token punctuation">{</span>    List<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> findAll<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>编写在resources文件中创建 mapper/UserMapper.xml文件</p><p><strong>注意</strong>：<br> 1.namespace中需要与使用@Mapper的接口对应<br> 2.UserMapper.xml文件名称必须与使用@Mapper的接口一致<br> 3.标签中的id必须与@Mapper的接口中的方法名一致，且参数一致</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>?xml <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">"1.0"</span> <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">"UTF-8"</span> ?<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span>mapper <span class="token assign-left variable">namespace</span><span class="token operator">=</span><span class="token string">"com.xmy.demo.mybatis.mapper.UserMapper"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>select <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">"findAll"</span> <span class="token assign-left variable">resultType</span><span class="token operator">=</span><span class="token string">"User"</span><span class="token operator">&gt;</span>        SELECT * FROM tb_user    <span class="token operator">&lt;</span>/select<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/mapper<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编写接口com.xmy.demo.mybatis.service</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">public interface UserService <span class="token punctuation">{</span>    List<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> findAll<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>编写实现类com.zhg.demo.mybatis.service.impl.UserServiceimpl</p><p><strong>注意</strong>：需要在接口实现类中使用@Service注解，才能被SpringBoot扫描，在Controller中使用@Authwired注入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@Service<span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span>public class UserServiceimpl implements UserService <span class="token punctuation">{</span>    @Autowired    private UserMapper userMapper<span class="token punctuation">;</span>    @Override    public List<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token function-name function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token builtin class-name">return</span> userMapper.findAll<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编写api接口com.xmy.demo.mybatis.controller.UserController</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@RestController@RequestMapping<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>public class UserController <span class="token punctuation">{</span>    @Autowired    private UserService userService<span class="token punctuation">;</span>    @RequestMapping<span class="token punctuation">(</span><span class="token string">"/findAll"</span><span class="token punctuation">)</span>    public List<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token function-name function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token builtin class-name">return</span> userService.findAll<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在启动类中添加对@MapperScan的扫描</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@SpringBootApplication@MapperScan<span class="token punctuation">(</span><span class="token string">"com.xmy.demo.mybatis.mapper"</span><span class="token punctuation">)</span>//使用MapperScan批量扫描所有的Mapper接口；public class MybatisApplication <span class="token punctuation">{</span>    public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        SpringApplication.run<span class="token punctuation">(</span>MybatisApplication.class, args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="四-修改和创建配置文件"><a href="#四-修改和创建配置文件" class="headerlink" title="四.修改和创建配置文件"></a>四.修改和创建配置文件</h3><p><strong>注意</strong>：<br> 1.mybatis中的mapper-locations是mapper的xml文件位置<br> 2.mybatis中的type-aliases-package是为了配置xml文件中resultType返回值的包位置，如果未配置请使用全包名如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>select <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">"findAll"</span> <span class="token assign-left variable">resultType</span><span class="token operator">=</span><span class="token string">"com.xmy.demo.mybatis.entity.User"</span><span class="token operator">&gt;</span>        SELECT * FROM tb_user<span class="token operator">&lt;</span>/select<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在resources中创建application.yml文件，并编写配置</p><p>port:端口号，可自定义，特殊端口号不可以用，如：8080</p><p>url:数据库路径，将后面的地址和端口号以及创建的数据库名称修改成自己的</p><p>usrname:数据库的用户名</p><p>password:数据库密码</p><p>type-aliases-package:entity的路径</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server:  port: <span class="token number">8081</span>spring:  <span class="token comment">#数据库连接配置</span>  datasource:    driver-class-name: com.mysql.cj.jdbc.Driver    url: jdbc:mysql://47.107.105.158:3306/test?characterEncoding<span class="token operator">=</span>utf-8<span class="token operator">&amp;</span><span class="token assign-left variable">useSSL</span><span class="token operator">=</span>false    username: root    password: <span class="token number">123456</span><span class="token comment">#mybatis的相关配置</span>mybatis:  <span class="token comment">#mapper配置文件</span>  mapper-locations: classpath:mapper/*.xml  type-aliases-package: com.xmy.demo.mybatis.entity  <span class="token comment">#开启驼峰命名</span>  configuration:    map-underscore-to-camel-case: <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="六-启动并测试"><a href="#六-启动并测试" class="headerlink" title="六.启动并测试"></a>六.启动并测试</h3><p>创建数据库和数据表(数据库中创建)</p><pre class="line-numbers language-none"><code class="language-none">-- ------------------------------ create databasecreate database blog-- ------------------------------ ------------------------------ Table structure for tb_user-- ----------------------------DROP TABLE IF EXISTS `tb_user`;CREATE TABLE `tb_user` (  `id` int(11) NOT NULL,  `username` varchar(255) DEFAULT NULL,  `password` varchar(255) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;-- ------------------------------ Records of tb_user-- ----------------------------INSERT INTO `tb_user` VALUES ('1', 'laowang', '112233');INSERT INTO `tb_user` VALUES ('2', 'laoli', '123456');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>启动MybatisApplication</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-30%20072908.png"></p><p>在浏览器中输入<a href="http://localhost:8081/user/findAll">http://localhost:8081/user/findAll</a>,</p><p><img src="/2020/11/29/springboot-mybatis-kuang-jia-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-30%20073232.png"></p><p>到此，搭建成功!</p>]]></content>
      
      
      
        <tags>
            
            <tag> SpringBoot Mybatis 坏境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFSHA(高可用)集群搭建</title>
      <link href="2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/"/>
      <url>2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/</url>
      
        <content type="html"><![CDATA[<blockquote><p>添加环境变量</p><p>解压文件</p><p>关闭防火墙，更改主机名</p><p>配置zookeeper</p><p>配置hadoop</p><p>配置hbase</p><p>关机克隆虚拟机，开机后更改主机名并重新登录</p><p>启动zookeeper</p><p>启动hadoop</p><p>启动hbase</p></blockquote><p>导入文件</p><p>在根目录下创建software文件夹，将资源包导入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /<span class="token punctuation">[</span>hadoop@promote /<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> software <span class="token punctuation">[</span>hadoop@promote /<span class="token punctuation">]</span>$ <span class="token function">chmod</span> <span class="token number">777</span> software  <span class="token comment">#赋予文件夹software权限</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>资源获取地址：<a href="https://pan.baidu.com/s/1EW8t5szEkG-1Uk6iqeRQbQ">https://pan.baidu.com/s/1EW8t5szEkG-1Uk6iqeRQbQ</a> 提取码：2a3c</p><p>通过xftp 6 将资源包传输到  /software  目录下</p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20152213.png"></p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-04%20103308.png"></p><h3 id="一-添加环境变量"><a href="#一-添加环境变量" class="headerlink" title="一.添加环境变量"></a>一.添加环境变量</h3><p>进入root用户</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span>$ <span class="token function">su</span> root<span class="token punctuation">[</span>root@promote <span class="token punctuation">]</span><span class="token comment"># vi /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>进入/etc/profile文件添加环境变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote <span class="token punctuation">]</span><span class="token comment"># vi /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#java environment</span><span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201<span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> JAVA_HOME CLASSPATH <span class="token environment constant">PATH</span><span class="token comment">#zookeeper environment</span><span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/zookeeper/zookeeper-3.4.13<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ZOOKEEPER_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> ZOOKEEPER_HOME <span class="token environment constant">PATH</span><span class="token comment">#hadoop environment</span><span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/hadoop/hadoop-2.7.7<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> HADOOP_HOME <span class="token environment constant">PATH</span><span class="token comment">#hbase environment</span><span class="token assign-left variable">HBASE_HOME</span><span class="token operator">=</span>/hbase/hbase-1.2.10<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$HBASE_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> HBASE_HOME<span class="token comment">#hive environment</span><span class="token assign-left variable">HIVE_HOME</span><span class="token operator">=</span>/hive/apache-hive-2.1.1-bin<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$HIVE_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> HIVE_HOME <span class="token environment constant">PATH</span><span class="token comment">#Sqoop environment </span><span class="token assign-left variable">SQOOP_HOME</span><span class="token operator">=</span>/sqoop/sqoop-1.99.7-bin-hadoop200<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$SQOOP_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> SQOOP_HOME SQOOP_SERVER_EXTRA_LIB <span class="token environment constant">PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>source 文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote <span class="token punctuation">]</span><span class="token comment">#source /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看环境变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote <span class="token punctuation">]</span><span class="token comment">#echo $PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看java 版本</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">java -version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-04%20103824.png"></p><p>在根目录下创建java、zookeeper、hadoop、hbase,分别进入解压</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote <span class="token punctuation">]</span><span class="token comment">#cd /</span><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#mkdir java zookeeper hadoop hbase</span><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#cd /java</span><span class="token punctuation">[</span>root@promote java<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/jdk-8u201-linux-x64.tar.gz</span><span class="token punctuation">[</span>root@promote java<span class="token punctuation">]</span><span class="token comment">#cd /zookeeper/</span><span class="token punctuation">[</span>root@promote zookeeper<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/zookeeper-3.4.13.tar.gz</span><span class="token punctuation">[</span>root@promote zookeeper<span class="token punctuation">]</span><span class="token comment">#cd /hadoop/</span><span class="token punctuation">[</span>root@promote hadoop<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/hadoop-2.7.7.tar.gz</span><span class="token punctuation">[</span>root@promote hadoop<span class="token punctuation">]</span><span class="token comment">#cd /hbase</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/hbase-1.2.10-bin.tar.gz</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment">#java -version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20121157.png"></p><h3 id="三-关闭防火墙，更改主机名"><a href="#三-关闭防火墙，更改主机名" class="headerlink" title="三.关闭防火墙，更改主机名"></a>三.关闭防火墙，更改主机名</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment"># systemctl disable firewalld 下次开机后自动关闭防火墙</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld   关闭防火墙</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment"># systemctl status firewalld</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname xmy62-1</span><span class="token punctuation">[</span>root@promote hbase<span class="token punctuation">]</span><span class="token comment">#exit    退出</span><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span>$ <span class="token function">su</span> root   重新登录查看<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20121617.png"></p><h3 id="四-配置zookeeper"><a href="#四-配置zookeeper" class="headerlink" title="四.配置zookeeper"></a>四.配置zookeeper</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hbase<span class="token punctuation">]</span>cd /zookeeper<span class="token punctuation">[</span>root@xmy62-1 zookeeper<span class="token punctuation">]</span><span class="token comment">#ls</span><span class="token punctuation">[</span>root@xmy62-1 zookeeper<span class="token punctuation">]</span><span class="token comment">#mkdir data logs</span><span class="token punctuation">[</span>root@xmy62-1 zookeeper<span class="token punctuation">]</span><span class="token comment">#cd /zookeeper/zookeeper-3.4.12/conf</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment">#ll</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># cp zoo_sample.cfg zoo.cfg</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># vi zoo.cfg</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">修改--注释：<span class="token comment">#dataDir=/tmp/zookeeper</span><span class="token comment">#clientPort=2181</span>--新增：<span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/zookeeper/data<span class="token assign-left variable">dataLogDir</span><span class="token operator">=</span>/zookeeper/logs<span class="token assign-left variable">clientPort</span><span class="token operator">=</span><span class="token number">2181</span>server.1<span class="token operator">=</span>xmy62-1:2888:3888server.2<span class="token operator">=</span>xmy62-2:2888:3888server.3<span class="token operator">=</span>xmy62-3:2888:3888<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20122333.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">在1里面输，2和3克隆之后再输<span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># echo '1' &gt; /zookeeper/data/myid</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># cat /zookeeper/data/myid </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20122601.png"></p><h3 id="五-Hadoop配置"><a href="#五-Hadoop配置" class="headerlink" title="五.Hadoop配置"></a>五.Hadoop配置</h3><p>修改 hadoop-env.sh、core-site.xml、hdfs-site.xml、mapred-site.xml、yarn-env.sh、yarn-site.xml文件</p><p>修改hadoop-env.sh和yarn-env.sh</p><p>因为这两个文件是环境变量文件，所以修改前建议先复制</p><p>修改文件的JAVA_HOME</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># cd /hadoop/</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ls</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># mkdir data name tmp journal</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># cd /hadoop/hadoop-2.7.7/etc/hadoop/</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># cp hadoop-env.sh hadoop-env.shark</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi hadoop-env.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改java路径如下</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">[root@xmy62-1 hadoop]# vi yarn-env.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改java路径如下</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改.xml文件</p><p>修改此类文件，只需将变量添加到之间</p><p>修改core-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi core-site.xml    --指定Hadoop的访问路径，即Hadoop的主节点服务器及端口号</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.defaultFS<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://localhost:900<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>   <span class="token comment">#Hadoop 的访问路径</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.defaultFS<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span>      <span class="token comment">#hadoop-ha62--这里的名称是可以自定义的(着重强调:此后xml文件的相关名称都要这个名称)</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hadoop/tmp<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>ha.zookeeper.quorum<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-1:2181,xmy62-2:2181,xmy62-3:218<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hadoop/tmp<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>           <span class="token comment">#Hadoop 本地临时存放路径</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改hdfs-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi hdfs-site.xml </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.nameservices<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span>           <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.ha.namenodes.hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>name-1,name-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.rpc-address.hadoop-ha62.name-<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/name<span class="token operator">&gt;</span>   <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-1:900<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>      <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.http-address.hadoop-ha62.name-<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/name<span class="token operator">&gt;</span>  <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-1:5007<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>     <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.rpc-address.hadoop-ha62.name-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/name<span class="token operator">&gt;</span>   <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-2:900<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>      <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.http-address.hadoop-ha62.name-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/name<span class="token operator">&gt;</span>  <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-2:5007<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>     <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.shared.edits.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>qjournal://xmy62-2:8485<span class="token punctuation">;</span>xmy62-3:8485/hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span>  <span class="token comment">#修改成另外两个结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.journalnode.edits.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hadoop/journal<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.ha.automatic-failover.enabled<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>true<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.client.failover.proxy.provider.hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/name<span class="token operator">&gt;</span>    <span class="token comment">#使用hadoop-ha62这个名称</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.ha.fencing.methods<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>sshfenceshell<span class="token punctuation">(</span>/bin/true<span class="token punctuation">)</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/root/.ssh/id_rsa<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.ha.fencing.ssh.connect-timeout<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">6000</span><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.name.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hadoop/name<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.datanode.data.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hadoop/data<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.replication<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>用mapred-site.xml.template生成.xml文件并进行修改</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># cp mapred-site.xml.template mapred-site.xml</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi mapred-site.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.framework.name<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>修改 yarn-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi yarn-site.xml </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.ha.enabled<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>true<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.cluster-id<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hadoop-ha6<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span>        <span class="token comment">#这里的名称可以自定义</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.ha.rm-ids<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>resource-1,resource-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.hostname.resource-<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span>   <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.hostname.resource-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/value<span class="token operator">&gt;</span> <span class="token comment">#修改成结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.zk-address<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-1:2181,xmy62-2:2181,xmy62-3:218<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span>  <span class="token comment">#修改成三个结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.aux-services<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加另外两台主机，使得结点1可以与另外连个结点通信</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># vi slaves</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xmy62-2xmy62-3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="六-Hbase配置"><a href="#六-Hbase配置" class="headerlink" title="六.Hbase配置"></a>六.Hbase配置</h3><p>修改hbase /conf 目录下的 hbase-env.sh和 hbase-site.xml文件</p><p>修改hbase-env.sh，将下面对应修改的地方添加进去</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># cd /hbase/</span><span class="token punctuation">[</span>root@xmy62-1 hbase<span class="token punctuation">]</span><span class="token comment"># ls</span><span class="token punctuation">[</span>root@xmy62-1 hbase<span class="token punctuation">]</span><span class="token comment"># mkdir data logs</span><span class="token punctuation">[</span>root@xmy62-1 hbase<span class="token punctuation">]</span><span class="token comment"># cd /hbase/hbase-1.2.10/</span><span class="token punctuation">[</span>root@xmy62-1 hbase-1.2.10<span class="token punctuation">]</span><span class="token comment"># ll</span><span class="token punctuation">[</span>root@xmy62-1 hbase-1.2.10<span class="token punctuation">]</span><span class="token comment"># cd /hbase/hbase-1.2.10/conf/</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># cp hbase-env.sh hbase-env.shark</span><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># vi hbase-env.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加如下变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201/<span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_CLASSPATH</span><span class="token operator">=</span>/hadoop/hadoop-2.7.7/etc/hadoop<span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_LOG_DIR</span><span class="token operator">=</span>/hbase/logs<span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_MANAGES_ZK</span><span class="token operator">=</span>false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>修改hbase-site.xml文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># vi hbase-site.xml </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hbase.rootdir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://hadoop-ha62/user/root/hbase<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hbase.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/hbase/tmp<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hbase.cluster.distributed<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>true<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hbase.zookeeper.quorum<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xmy62-1:2181,xmy62-2:2181,xmy62-3:218<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span>  <span class="token comment">#修改成三个结点的主机号</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hbase.master.maxclockskew<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">6000</span><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># vi backup-masters</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xmy62-1xmy62-2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment"># vi regionservers </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xmy62-2xmy62-3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="七-关机克隆虚拟机，开机后更改主机名并重新登录"><a href="#七-关机克隆虚拟机，开机后更改主机名并重新登录" class="headerlink" title="七.关机克隆虚拟机，开机后更改主机名并重新登录"></a>七.关机克隆虚拟机，开机后更改主机名并重新登录</h3><p>1.在Vmware workstation中克隆两台主机，共创建三台主机</p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-18%20204009.png"></p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-18%20204201.png"></p><p>2.修改主机2和3的主机名</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname xmy62-2</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname xmy62-3</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment">#exit</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment">#su root</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>3.三台虚拟机同时进行如下操作</p><p>将  BOOTPROTO=”dhcp” 注释掉，然后添加网络，网络的主机号一般在200以上</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment">#cd /etc/sysconfig/network-scripts/</span><span class="token punctuation">[</span>root@xmy62-2 conf<span class="token punctuation">]</span><span class="token comment">#cd /etc/sysconfig/network-scripts/</span><span class="token punctuation">[</span>root@xmy62-3 conf<span class="token punctuation">]</span><span class="token comment">#cd /etc/sysconfig/network-scripts/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-18%20234845.png"></p><p>4.重启网络</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 conf<span class="token punctuation">]</span><span class="token comment">#systemctl restart network</span><span class="token punctuation">[</span>root@xmy62-2 conf<span class="token punctuation">]</span><span class="token comment">#systemctl restart network</span><span class="token punctuation">[</span>root@xmy62-3 conf<span class="token punctuation">]</span><span class="token comment">#systemctl restart network</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>5.分别在三台虚拟机中进入hosts，添加ip地址和主机名</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote conf<span class="token punctuation">]</span><span class="token comment">#vi /etc/hosts</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">192.168.1.201  xmy62-1192.168.1.202  xmy62-2  192.168.1.203  xmy62-2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>测试</p><p>在Vmware workstation中互ping主机名</p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-18%20235914.png"></p><p>6.配置免密登录（第一台主机进行操作）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh-keygen -t rsa  #‘-t’这边有空格，一直按回车发送公钥，建议1,2,3都发</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@xmy62-1</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@xmy62-2</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@xmy62-3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20133750.png"></p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20133809.png"></p><p>7.查看</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh xmy62-2</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># ssh xmy62-3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20133828.png"></p><p>8.三台同步时间</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hwclock -w</span><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment"># hwclock -w</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># hwclock -w</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="八-启动zookeeper"><a href="#八-启动zookeeper" class="headerlink" title="八.启动zookeeper"></a>八.启动zookeeper</h3><p>1.修改myid</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-2 zookeeper<span class="token punctuation">]</span><span class="token comment"># rm -rf /zookeeper/data/myid </span><span class="token punctuation">[</span>root@xmy62-2 zookeeper<span class="token punctuation">]</span><span class="token comment"># echo '2' &gt;  /zookeeper/data/myid</span><span class="token punctuation">[</span>root@xmy62-2 zookeeper<span class="token punctuation">]</span><span class="token comment"># cat /zookeeper/data/myid</span><span class="token punctuation">[</span>root@xmy62-3 zookeeper<span class="token punctuation">]</span><span class="token comment"># rm -rf /zookeeper/data/myid</span><span class="token punctuation">[</span>root@xmy62-3 zookeeper<span class="token punctuation">]</span><span class="token comment"># echo '3' &gt; /zookeeper/data/myid</span><span class="token punctuation">[</span>root@xmy62-3 zookeeper<span class="token punctuation">]</span><span class="token comment"># cat /zookeeper/data/myid</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.启动zookeeper</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># zkServer.sh start</span><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment"># zkServer.sh start</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># zkServer.sh start</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment">#zkServer.sh status</span><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment">#zkServer.sh status</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment">#zkServer.sh status</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>出现两个follower，一个leader时即为配置成功</p><h3 id="九-启动hadoop"><a href="#九-启动hadoop" class="headerlink" title="九.启动hadoop"></a>九.启动hadoop</h3><p>1.三台启动jouanalnode</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh start journalnode</span><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh start journalnode</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh start journalnode</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2.在第一台输入格式化命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop namenode -format #'-format'这边有空格</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Status应该为0</p><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20135221.png"></p><p>3.复制文件name</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># scp -r /hadoop/name/ root@xmy62-2:/hadoop/</span><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># scp -r /hadoop/name/ root@xmy62-3:/hadoop/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20135343.png"></p><p>4.在第一台格式化zk</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment">#hdfs zkfc -formatZK</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/11/18/hdfs-gao-ke-yong-qun-ji-da-jian/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-05%20135515.png"></p><p>5.关闭1、2、3journalnode</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh stop journalnode</span><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh stop journalnode</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># hadoop-daemon.sh stop journalnode</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>6.在第一台上启动hadoop</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># start-all.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>7.在2和3上yarn-daemon.sh start resourcemanager</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-2 hadoop<span class="token punctuation">]</span><span class="token comment"># yarn-daemon.sh start resourcemanager</span><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># yarn-daemon.sh start resourcemanager</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>8.在三个结点上分别jps查看，jps查看的内容必须与下面出现的信息一致，否则配置就是不成功的</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-3 hadoop<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">9218</span> DFSZKFailoverController<span class="token number">9587</span> Jps<span class="token number">7176</span> QuorumPeerMain<span class="token number">8922</span> NameNode<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@cluster1-2 name<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">8226</span> DFSZKFailoverController<span class="token number">8020</span> DataNode<span class="token number">8308</span> NodeManager<span class="token number">8470</span> ResourceManager<span class="token number">8523</span> Jps<span class="token number">7949</span> NameNode<span class="token number">8111</span> JournalNode<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@cluster1-3 ~<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">7776</span> JournalNode<span class="token number">7872</span> NodeManager<span class="token number">7105</span> QuorumPeerMain<span class="token number">7685</span> DataNode<span class="token number">7997</span> Jps<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="十-启动hbase"><a href="#十-启动hbase" class="headerlink" title="十.启动hbase"></a>十.启动hbase</h3><p>1.启动hbase</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># start-hbase.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在三个结点上分别jps查看，jps查看的内容必须与下面出现的信息一致，否则配置就是不成功的</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">3024</span> ResourceManager<span class="token number">2242</span> DFSZKFailoverController<span class="token number">3683</span> Jps<span class="token number">3204</span> HMaster<span class="token number">1957</span> NameNode<span class="token number">1591</span> QuorumPeerMain<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-2 zookeeper<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1553</span> QuorumPeerMain<span class="token number">2498</span> ResourceManager<span class="token number">2054</span> NodeManager<span class="token number">2790</span> HRegionServer<span class="token number">2855</span> HMaster<span class="token number">1787</span> DataNode<span class="token number">1726</span> NameNode<span class="token number">1982</span> DFSZKFailoverController<span class="token number">1871</span> JournalNode<span class="token number">3183</span> Jps<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-3 zookeeper<span class="token punctuation">]</span><span class="token comment"># jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2288</span> Jps<span class="token number">1684</span> DataNode<span class="token number">1768</span> JournalNode<span class="token number">2072</span> HRegionServer<span class="token number">1853</span> NodeManager<span class="token number">1518</span> QuorumPeerMain<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>进入hbase</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@xmy62-1 hadoop<span class="token punctuation">]</span><span class="token comment">#hbase shell</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 集群 HA Centos（最小化安装） </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Censtos系统MySQL配置</title>
      <link href="2020/10/28/censtos-xi-tong-mysql-pei-zhi/"/>
      <url>2020/10/28/censtos-xi-tong-mysql-pei-zhi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>卸载Centos自带的MySQL方法</p><p>MySQL的坏境配置</p><p>MySQL初始化配置和启动</p><p>MySQL的系统服务配置</p></blockquote><h3 id="一-卸载Censtos自带的MySQL方法"><a href="#一-卸载Censtos自带的MySQL方法" class="headerlink" title="一.卸载Censtos自带的MySQL方法"></a>一.卸载Censtos自带的MySQL方法</h3><p>Centos7.0 默认自带了MySQL的数据库，名称为mariadb,在安装定制版MySQL数据库时，需卸载mariadb,否则会发生内核冲突</p><h5 id="1-关闭所有的hadoop应用、做快照（配置错误导致整个伪分布式平台毁坏时可以立即恢复到配置前）"><a href="#1-关闭所有的hadoop应用、做快照（配置错误导致整个伪分布式平台毁坏时可以立即恢复到配置前）" class="headerlink" title="1.关闭所有的hadoop应用、做快照（配置错误导致整个伪分布式平台毁坏时可以立即恢复到配置前）"></a>1.关闭所有的hadoop应用、做快照（配置错误导致整个伪分布式平台毁坏时可以立即恢复到配置前）</h5><h5 id="2-进入root用户，MySQL的配置全程都在root用户下进行"><a href="#2-进入root用户，MySQL的配置全程都在root用户下进行" class="headerlink" title="2.进入root用户，MySQL的配置全程都在root用户下进行"></a>2.进入root用户，MySQL的配置全程都在root用户下进行</h5><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20164517.png"></p><h5 id="3-查询mariadb状态，有的话就全部卸载"><a href="#3-查询mariadb状态，有的话就全部卸载" class="headerlink" title="3.查询mariadb状态，有的话就全部卸载"></a>3.查询mariadb状态，有的话就全部卸载</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -qa |grep mariadb   查询</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#yum remove 文件名        卸载</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20164754.png"></p><h5 id="4-查询有无安装libaio软件包，一般系统中都有，没有的话可以安装"><a href="#4-查询有无安装libaio软件包，一般系统中都有，没有的话可以安装" class="headerlink" title="4.查询有无安装libaio软件包，一般系统中都有，没有的话可以安装"></a>4.查询有无安装libaio软件包，一般系统中都有，没有的话可以安装</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -qa |grep libaio</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20164851.png"></p><h3 id="二-MySQL的坏境配置"><a href="#二-MySQL的坏境配置" class="headerlink" title="二.MySQL的坏境配置"></a>二.MySQL的坏境配置</h3><h5 id="1-创建mysql用户和用户组"><a href="#1-创建mysql用户和用户组" class="headerlink" title="1.创建mysql用户和用户组"></a>1.创建mysql用户和用户组</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#tail /etc/passwd   --检查是否存在mysql，这里是没有的</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20164959.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#groupadd mysql   --创建mysql群组</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#useradd -r -g mysql mysql  --在mysql群组里创建mysql用户</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2-将MySQL的软件包解压到-mysql"><a href="#2-将MySQL的软件包解压到-mysql" class="headerlink" title="2.将MySQL的软件包解压到/mysql"></a>2.将MySQL的软件包解压到/mysql</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#mkdir /mysql   --创建mysql文件</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#cd /mysql   --进入到mysql目录</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20165315.png"></p><h5 id="3-创建MySQL的软链接"><a href="#3-创建MySQL的软链接" class="headerlink" title="3.创建MySQL的软链接"></a>3.创建MySQL的软链接</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#cd /usr/local</span><span class="token punctuation">[</span>root@promote local<span class="token punctuation">]</span><span class="token comment">#ln -s /musql/mysql-8.0.11-linux-glibc2.12-x86_64/ mysql  --软链接名称‘mysql’前要有空格</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>正确的软链接的创建是蓝色的，如果不是则删除链接’mysql‘重新创建 </p><p>删除操作： rm mysql</p><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20165437.png"></p><h5 id="4-创建MySQL的data目录并变更权限"><a href="#4-创建MySQL的data目录并变更权限" class="headerlink" title="4.创建MySQL的data目录并变更权限"></a>4.创建MySQL的data目录并变更权限</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote local<span class="token punctuation">]</span><span class="token comment">#cd /usr/local/mysql  --进入mysql目录</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mkdir data   --创建data文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#chmod 770 data</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#chown -R mysql .</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#chgrp -R mysql .</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20165718.png"></p><h5 id="5-配置坏境变量"><a href="#5-配置坏境变量" class="headerlink" title="5.配置坏境变量"></a>5.配置坏境变量</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#vi /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在文件末尾加入以下内容</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#mysql environment</span><span class="token assign-left variable">MYSQL_HOME</span><span class="token operator">=</span>/usr/local/mysql<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$MYSQL_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> MYSQL_HOME <span class="token environment constant">PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#source /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#echo $PATH</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mysql    --显示不能连接（这样的报错是对的，不用管它）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="三-MySQL初始化配置和启动"><a href="#三-MySQL初始化配置和启动" class="headerlink" title="三.MySQL初始化配置和启动"></a>三.MySQL初始化配置和启动</h3><h5 id="1-MySQL数据库的初始化"><a href="#1-MySQL数据库的初始化" class="headerlink" title="1.MySQL数据库的初始化"></a>1.MySQL数据库的初始化</h5><p>初始化后root@localhost后会出现一串密码，这串密码需要记下来，后续需要用它来登录MySQL，如果没有密码则配置错误，需将data目录删除重新配置</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20170940.png"></p><h5 id="2-MySQL数据库的ssl-rsa安装"><a href="#2-MySQL数据库的ssl-rsa安装" class="headerlink" title="2.MySQL数据库的ssl_rsa安装"></a>2.MySQL数据库的ssl_rsa安装</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mysql_ssl_rsa_setup --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>出现下面一段信息则配置正确，如果没有则配置错误，需将data目录删除重新配置</p><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/IMG_20201028_185207.jpg"></p><h5 id="3-MySQL数据库的安全模式启动"><a href="#3-MySQL数据库的安全模式启动" class="headerlink" title="3.MySQL数据库的安全模式启动"></a>3.MySQL数据库的安全模式启动</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mysqld_safe --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data &amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="4-MySQL数据库的启动"><a href="#4-MySQL数据库的启动" class="headerlink" title="4.MySQL数据库的启动"></a>4.MySQL数据库的启动</h5><p>mysql在创建数据库前需要修改密码，否则无法正常使用。</p><p>初始登录时是需要用初始化时生成的密码登录的，我这里是’ ； ？GCyJ8et;pc‘</p><p>这里就选用登录时修改密码,这里我将密码修改为 123456</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#mysqladmin -u root -p password 123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20171415.png"></p><h3 id="四-MySQL的系统服务配置"><a href="#四-MySQL的系统服务配置" class="headerlink" title="四.MySQL的系统服务配置"></a>四.MySQL的系统服务配置</h3><h5 id="1-MySQL服务加到系统服务目录并命名为mysql"><a href="#1-MySQL服务加到系统服务目录并命名为mysql" class="headerlink" title="1.MySQL服务加到系统服务目录并命名为mysql"></a>1.MySQL服务加到系统服务目录并命名为mysql</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="2-重启MySQL服务-确认配置正确"><a href="#2-重启MySQL服务-确认配置正确" class="headerlink" title="2.重启MySQL服务,确认配置正确"></a>2.重启MySQL服务,确认配置正确</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#service mysql restart</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20175259.png"></p><h5 id="3-MySQL服务配置为开机自启动"><a href="#3-MySQL服务配置为开机自启动" class="headerlink" title="3.MySQL服务配置为开机自启动"></a>3.MySQL服务配置为开机自启动</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#chkconfig --add mysql</span><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#chkconfig --level 3000 mysql on    --这里的3000可以自定义，表示在第几个服务后开启mysql,我这里表示到第3000个服务时开启</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="4-重启Centos-验证MySQL服务启动"><a href="#4-重启Centos-验证MySQL服务启动" class="headerlink" title="4.重启Centos,验证MySQL服务启动"></a>4.重启Centos,验证MySQL服务启动</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote mysql<span class="token punctuation">]</span><span class="token comment">#reboot    --重启</span><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> mysql   --查看mysql进程<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/10/28/censtos-xi-tong-mysql-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20175542.png"></p><p>MySQL配置完成<del>~</del></p>]]></content>
      
      
      
        <tags>
            
            <tag> CenstOS 7 MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sql Server 基础入门(三)</title>
      <link href="2020/10/19/sql-server-ji-chu-ru-men-san/"/>
      <url>2020/10/19/sql-server-ji-chu-ru-men-san/</url>
      
        <content type="html"><![CDATA[<blockquote><p>数据的插入</p><p>数据的更新</p><p>数据的删除</p><p>数据的检索</p></blockquote><h3 id="一-数据的插入"><a href="#一-数据的插入" class="headerlink" title="一.数据的插入"></a>一.数据的插入</h3><p><img src="/2020/10/19/sql-server-ji-chu-ru-men-san/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-19%20143925.png"></p><p><img src="/2020/10/19/sql-server-ji-chu-ru-men-san/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-19%20143754.png"></p><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert [into] 表名 (字段列表) values(值列表)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--说明：标识列值任何时候都不可以插入值,同时插入的值需要满足表的所有完整性约束--1.为表的所有字段添加值--如果不指定字段列表，那么就默认需要为所有字段添加值insert into Teacher values('张三',1,1，20，2000，‘2000-01-02’)--2.值不能违反表的约束insert into Teacher values('66',1,1，20，2000，‘2000-01-02’)  --会报错--3.1指定列插入insert into Teacher(Name,Gender,Classid,Birthday) values('张三',1,1,‘2000-01-02’)--3.2插入值要和表中指定值的数目一样insert into Teacher values('66',1,1，20，2000，‘2000-01-02’，123)  --会报错--4.非空字段一定需要插入值，除非它有默认值   如果一个字段可以为null,或者默认值，那么在插入的时候也可以执行   可以为空字段赋值null，为默认字段赋值default--5.所有的值都可以使用‘ ’包含，如果字段的类型是数据，那么系统会自动的进行类型转换--6.如果是日期值，没有使用‘ ’，就会得到系统的默认日期<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二-数据的更新"><a href="#二-数据的更新" class="headerlink" title="二.数据的更新"></a>二.数据的更新</h3><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">update 表名 set 字段=值，字段=值 where 条件(主键、唯一键、标识列)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--1.修改张三的班级为7update Teacher set Classid=7 where Name='张三'--2.修改张三的性别 修改为女，同时将年龄修改为25，将工资加1000update Teacher set Gender=0,Age=25,Salary=Salary+1000 where Name='张三'--3.判断多条件 not and of 修改性别是男同时是7班，将工资+500update Teacher set Salary+=500 where Gender=1 and Classid=7 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="三-数据的删除"><a href="#三-数据的删除" class="headerlink" title="三.数据的删除"></a>三.数据的删除</h3><p>数据的删除，不能删除某一列，因为删除是对记录而言</p><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-none"><code class="language-none">delete [from] 表 where 条件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--1.删除姓名为‘8’的人delete from Teacher where Name='8'--2.多条件删除删除表中课程id为6，性别为女，年龄大于20delete from Teacher where Classid=6 and Gender=0 and Age&gt;20--3.删除所有数据delete from Teacher<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>–truncate</p><p>一次性删除所有记录，日志文件以最小化的方式写入，效率更高</p><p>标识列从种子值重新计算</p><p>不可以触发触发器</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">truncate table 表名(不能添加条件，因为他不是一条一条删除的的，而实一次性删除所有记录，不关注删除的条数)truncate table Teacher<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="四-数据的查询"><a href="#四-数据的查询" class="headerlink" title="四.数据的查询"></a>四.数据的查询</h3><h5 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select 字段列表/*from 列表名 where 条件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--1.查询所有信息select * from Teacher--2.查询指定的列select id,Name,Salary from Teacher--3.指定查询的条件，查询女老师select * from Teacher where Gender=0--4.为列指定中文别名select id as 工号,Name,Salary from Teacher where Gender=0 and Age &lt;30<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sql Server 基础篇(二)</title>
      <link href="2020/10/18/sql-server-ji-chu-ru-men-er/"/>
      <url>2020/10/18/sql-server-ji-chu-ru-men-er/</url>
      
        <content type="html"><![CDATA[<blockquote><p>数据完整性</p><p>代码实现</p></blockquote><h3 id="一-数据完整性"><a href="#一-数据完整性" class="headerlink" title="一.数据完整性"></a>一.数据完整性</h3><h5 id="1-实体完整性"><a href="#1-实体完整性" class="headerlink" title="1.实体完整性"></a>1.实体完整性</h5><p>1.1实体：表的每一行数据称为一个实体</p><p>1.2实体完整性：每一行记录值唯一的、不重复的</p><p>1.3实体完整性包含标识列、主键和唯一键</p><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">标识列：系统自动生成，永远不会重复主键：非空唯一键：唯一，但可以为null(只能空一次)  编辑器中设置方式：右键--&gt;索引/键--&gt;添加--&gt;修改名称、修改类型、确定字段<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="2-域完整性"><a href="#2-域完整性" class="headerlink" title="2.域完整性"></a>2.域完整性</h5><p>2.1域：字段</p><p>2.2域完整性：为了保证字段的值是否合理和准确</p><p>2.3域完整性包含非空、类型、check约束、默认值、关系（主外键）</p><h5 id="3-自定义完整性"><a href="#3-自定义完整性" class="headerlink" title="3.自定义完整性"></a>3.自定义完整性</h5><p>3.1自定义完整性：用户用自己定义的约束规则</p><p>3.2自定义完整性包含check约束、存储过程、触发器</p><h5 id="4-引用完整性"><a href="#4-引用完整性" class="headerlink" title="4.引用完整性"></a>4.引用完整性</h5><p>4.1引用完整性：一个表的某个字段的值引用自另外一个表的某一个字段，被引用的表称为主表，引用表称为从表或者外键表</p><p>4.1.1 选择外键表去创建主外键关系</p><p>4.1.2建立主外键关系的字段类型和意义必需一致</p><p>4.1.3建立关系的字段主表中必须是主键或者唯一键</p><p>4.1.4添加数据的时候先添加主表数据再添加外键表</p><p>4.1.5删除数据的时候先删除外键表数据再删除主表数据</p><h5 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h5><p>关系建立的表的级联操作：</p><p>1.不执行任何操作：该报错就报错，能删除就删除</p><p>2.级联：删除主表记录，对应的从表记录也将被删除</p><p>3.set null：删除主表，从表对应记录的字段值=null ,前提是这个字段可以设置为null</p><p>4.set default:删除主表，从表对应记录的字段值=设置的默认值，前提是这个字段已经设置默认值了</p><h3 id="二-代码实现"><a href="#二-代码实现" class="headerlink" title="二.代码实现"></a>二.代码实现</h3><h5 id="1-创建约束的种类："><a href="#1-创建约束的种类：" class="headerlink" title="1.创建约束的种类："></a>1.创建约束的种类：</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">主键约束（primary key (PK)）唯一键约束（unique (UQ)）检查约束（check (CK)）默认值约束（default (DF)）外键约束(foregin key (FK))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-创建约束的语法"><a href="#2-创建约束的语法" class="headerlink" title="2.创建约束的语法"></a>2.创建约束的语法</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">alter table 表名add constraint 约束名称（以简写作为前缀） 约束的说明（字段）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">1.将id设置为主键alter table Teacheradd constraint PK_Teacher_id primary key（id）2.设置name为唯一键 alter table Teacheradd constraint UQ_Teacher_Name unique(name)3.设置年龄再0~100之间alter table Teacheradd constraint CK_Teacher_Age check(age&gt;0 and age&lt;=100)4为Birthday添加默认值约束alter table Teachre                      --for 指说明为哪一个字段添加默认值add constraint DF_Teacher_Birthday default('2020-01-01') for Birthday5.为classid添加外键约束(级联)alter table Teacher  --从表的某一个字段引用主表的某一个字段add constraint FK_Teacher_classid foreign key(classid) references classes(cid)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">删除级联if exists(select * from sysobjects where name='FK_Teacher_Name')alter table teacher drop constraint FK_Teacher_Namewith nocheck  --不检查现有输出add constraint FK_Teacher_classid foreign key(classid) reference classes(cid)on delete set null  (前提是该属性有空值)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sql Server 基础篇(一)</title>
      <link href="2020/10/18/sql-server-ji-chu-ru-men-yi/"/>
      <url>2020/10/18/sql-server-ji-chu-ru-men-yi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>创建数据库</p><p>创建数据表</p></blockquote><h3 id="一-创建数据库"><a href="#一-创建数据库" class="headerlink" title="一.创建数据库"></a>一.创建数据库</h3><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database 数据库名称on primary --在哪个文件组上创建，默认在文件组上创建（主数据文件）( --当它不是可以独立执行的sql命令的时候，同时它是某个结构中的某一句，就需添加 name='逻辑名称_data',   --逻辑名称一般会有一个后缀，数据文件--data,日志文件--log size=初始大小,   --数值不应该包含在‘ ’以内 filegrowth=增长方式,  --也不能添加包含在‘ ’以内 maxsize=最大容量， filename='全路径名'  --最后依据不添加逗号,扩展名.mdf)log on   --日志文件(--当它不是可以独立执行的sql命令的时候，同时它是某个结构中的某一句，就需添加 name='逻辑名称_log',   --逻辑名称一般会有一个后缀，数据文件--data,日志文件--log size=初始大小,   --数值不应该包含在‘ ’以内 filegrowth=增长方式,  --也不能添加包含在‘ ’以内 maxsize=最大容量， filename='全路径名'  --最后依据不添加逗号,扩展名.ldf)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><ul><li>创建数据库TestSchool</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database TestSchoolon primary  --primary  可以省略(    name='TestSchool_data',    size=3mb,    filegrowth=10%,    maxsize=100mb,    filename='D:\SQL\test\TestSchool_data.mdf')log on(    name='TestSchool_log',    size=3mb,    filegrowth=50%,    maxsize=100mb,   --日志文件一般不限制最大容量    filename='D:\SQL\test\TestSchool_log.ldf')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="删除创建的数据库"><a href="#删除创建的数据库" class="headerlink" title="删除创建的数据库"></a>删除创建的数据库</h5><p>数据库的执行只有一次，如果想再次执行则需将上次的数据库删除</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--先判断数据库是否存在，如果存在则删除--将当前数据库切换到masteruse master   -- master数据库里有一个文件，sysdatabases存储所有的数据库if exists (select * from sysdatabases where name='TestSchool')  在sysdatabases中查询是否存在TestSchool--删除数据库drop database TestSchoolgo  --表示上面的任务已执行完，进入下面的任务<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="自定义路径（自动创建文件夹）"><a href="#自定义路径（自动创建文件夹）" class="headerlink" title="自定义路径（自动创建文件夹）"></a>自定义路径（自动创建文件夹）</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--自动创建文件夹--开启外围应用配置管理器和xp_cmdsellexecute sp_configure'show advanced options',1   -- 1 开启，0 关闭RECONFIGURE   --重新设置execute sp_configure 'xp_cmdshell',1RECONFIGURE   --重新设置go --xp-cmdshell,让其帮助我们创建一个文件夹 'D:\SQL\test'execute xp_cmdshell'mkdir D:\SQL\test'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="实例–创建多个数据库"><a href="#实例–创建多个数据库" class="headerlink" title="实例–创建多个数据库"></a>实例–创建多个数据库</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">------------------------------判断--------------------------------先判断数据库是否存在，如果存在则删除--将当前数据库切换到masteruse master   -- master数据库里有一个文件，sysdatabases存储所有的数据库if exists (select * from sysdatabases where name='TestSchool')  在sysdatabases中查询是否存在TestSchool--删除数据库drop database TestSchoolgo  --表示上面的任务已执行完，进入下面的任务---------------------------自定义路径------------------------------自动创建文件夹--开启外围应用配置管理器和xp_cmdsellexecute sp_configure'show advanced options',1   RECONFIGURE   --重新设置execute sp_configure 'xp_cmdshell',1RECONFIGURE   --重新设置go --xp-cmdshell,让其帮助我们创建一个文件夹 'd:\SQL\test'execute xp_cmdshell'mkdir d:\SQL\test'---------------------------创建数据库-----------------------------create database TestSchoolon primary  --primary  可以省略(    name='TestSchool_data',    size=3mb,    filegrowth=10%,    maxsize=100mb,    filename='D:\SQL\test\TestSchool_data.mdf')，   --创建多个要加 逗号--不同的数据文件可以放入不同的数据组中,这时全路径可以改成新文件的路径filegroup userDe(    name='TestSchool_data1',    size=3mb,    filegrowth=10%,    maxsize=100mb,    filename='D:\aa\TestSchool_data1.ndf'  --次数据文件，这里写成ndf)log on(    name='TestSchool_log',    size=3mb,    filegrowth=50%,    maxsize=100mb,   --日志文件一般不限制最大容量    filename='D:\SQL\test\TestSchool_log.ldf')，(    name='TestSchool_log1',    size=3Mb,    filegrowth=50%,    maxsize=100mb,   --日志文件一般不限制最大容量    filename='D:\SQL\test\TestSchool_log1.ndf'  --次数据文件，这里写成ndf)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二-创建数据表"><a href="#二-创建数据表" class="headerlink" title="二.创建数据表"></a>二.创建数据表</h3><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table 表名(    字段名称 字段类型 字段特征（是否非空 标识列 默认值 主键 唯一键 check约束）,    字段名称 字段类型 字段特征（是否非空 标识列 默认值 主键 唯一键 check约束）)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><ul><li>创建老师表Teacher</li><li>Id、Name、Gender、Age、Salary、Birthday</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--切换到数据库中use TestSchool--判断是否存在table，有的话删除，以便多次执行if exists(select * from sysobjects where name='Teacher')drop table Teachercreate table Teacher(    Id int identity(1,1) primary key(作主键)   --设置标识列identity(表示种子，标识增量)    Name nvarchar not null, --not null标记字段不能null    Gender bit not null,     Age int check(age&gt;0 and age &lt;=100) --约束年龄在0~100    Salary money, --当一个字段可以为空时，可以写也可以不写null    Birthday datetime not null default('2009-01-01')  --dafault设置默认值，也可以不设置)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">----------------判断数据库是否存在，存在则删除----------------------use masterif exists(select * from sysdatabases where name='TestSchool')drop database TestSchoolgo---------------------------自定义路径------------------------------自动创建文件夹--开启外围应用配置管理器和xp_cmdsellexecute sp_configure'show advanced options',1RECONFIGUREexecute sp_configure'xp_cmdshell',1RECONFIGUREgo--创建文件夹  D:\Sql_Test\Testexecute xp_cmdshell 'mkdir D:\Sql_Test\Test'-----------------------------创建数据库---------------------------create database TestSchoolon(name='TestSchool_data',size=3mb,filegrowth=10%,maxsize=100mb,filename='D:\Sql_Test\Test\TestSchool_data.mdf')log on(name='TestSchool_log',size=1mb,filegrowth=10%,maxsize=100mb,filename='D:\Sql_Test\Test\TestSchool_log.ldf')go----------------------判断数据表是否存在，存在则删除------------------if exists(select * from sysobjects where name='Teacher')drop table Teachergo----------------------创建数据表-----------------------------------use TestSchoolcreate table Teacher(id int identity(1,1) primary key,Name nvarchar not null,Gender bit not null,Age int check(age &gt; 0 and age &lt; 100),Salary money,Birthday datetime not null default('2010-01-01'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/10/18/sql-server-ji-chu-ru-men-yi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-18%20154917.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop系统基本运维</title>
      <link href="2020/10/17/hadoop-xi-tong-ji-ben-yun-wei/"/>
      <url>2020/10/17/hadoop-xi-tong-ji-ben-yun-wei/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Zookeeper的管理</p><p>Hadoop的管理</p><p>Hbase的管理</p></blockquote><h3 id="一-Zookeeper的管理"><a href="#一-Zookeeper的管理" class="headerlink" title="一.Zookeeper的管理"></a>一.Zookeeper的管理</h3><h5 id="1-Zookeeper基本命令"><a href="#1-Zookeeper基本命令" class="headerlink" title="1.Zookeeper基本命令"></a>1.Zookeeper基本命令</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">启动ZK服务：zkServer.sh start查看ZK服务：ZkServer.sh status停止ZK服务：zkServer.sh stop重启ZK服务：zkServer.sh restart连接服务器：zkCli.sh -server Hostname<span class="token operator">&amp;</span>IP:2181<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-Zookeeper的操作界面"><a href="#2-Zookeeper的操作界面" class="headerlink" title="2.Zookeeper的操作界面"></a>2.Zookeeper的操作界面</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">help</span> --查看帮助<span class="token function">ls</span> --查看某个目录包含的所有文件ls2 --查看某个目录包含的所有文件，与ls不同的是它查看到time、version等信息create --创建znode,并设置初始内容   例：create /test <span class="token string">'test'</span> 创建一个新的znode节点，‘test’以及与它关联的字符串get --获取znode的数据delete --删除znodequit --退出客户端<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二-Hadoop的管理"><a href="#二-Hadoop的管理" class="headerlink" title="二.Hadoop的管理"></a>二.Hadoop的管理</h3><h5 id="1-hdfs常用命令"><a href="#1-hdfs常用命令" class="headerlink" title="1.hdfs常用命令"></a>1.hdfs常用命令</h5><p>1.1hdfs文件命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdfs dfs -mkdir <span class="token function">dir</span>     创建文件夹hdfs dfs -rm -r <span class="token function">dir</span>     删除文件夹hdfs dfs -ls     查看目录文件信息hdfs dfs -lsr    递归查看文件目录信息hdfs dfs -stat path   返回指定路径的信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>1.2查看空间大小</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdfs dfs -du -h <span class="token function">dir</span>   按照适合阅读的形式人性化显示文件大小hdfs dfs -dus uri     递归显示目标文件的大小hdfs dfs -du path/file    显示目标文件file的大小<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>1.3权限管理</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdfs dfs -chgrp group path   改变文件所属组hdfs dfs -chgrp -R/dir   递归更改dir目录的所属组hdfs dfs -chmod <span class="token punctuation">[</span>-R<span class="token punctuation">]</span> 权限 -path       改变文件的权限hdfs dfs -chown owner<span class="token punctuation">[</span>-group<span class="token punctuation">]</span>/dir    改变文件的所有者<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>1.4文件操作（上传下载复制）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdfs dfs -touchz a.txt   创建长度为0的空文件a.txthdfs dfs -rm <span class="token function">file</span>    删除文件filehdfs dfs -put <span class="token function">file</span> <span class="token function">dir</span>   向dir文件上传file文件hdfs dfs -put filea dir/fileb   向dir上传文件filea并且把filea改名为filebhdfs dfs -get <span class="token function">file</span> <span class="token function">dir</span>   下载file到本地文件夹hdfs dfs -cat <span class="token function">file</span>    查看文件filehdfs dfs -cp /dir/source/dir/target   把文件从源路径拷贝到目标路径hdfs dfs -copyToLocal hdfs中的文件  /本地/a.txt  从hdfs拷贝到本地并命名为ahdfs dfs -copyFromLocal /dir/source  /dir/target   把文件从源路径（本地）拷贝到目标路径hdfs dfs -mv /patha/a.txt /pathb/a.txt  把文件从a目录移动到b目录hadoop fs -du URI<span class="token punctuation">[</span>URI<span class="token punctuation">..</span>.<span class="token punctuation">]</span>  显示目录中所有文件的大小<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>1.5系统功能管理</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdfs dfs -expunge  清空回收站hdfs dfsadmin -safemode enter <span class="token operator">|</span>leave<span class="token operator">|</span>get<span class="token operator">|</span><span class="token function">wait</span>  <span class="token punctuation">(</span>安全模式<span class="token punctuation">)</span> 进入、离开、获取信息、等待hdfs dfsadmin -safemode enter    进入安全模式hdfs dfsadmin -safemode leave    离开安全模式hdfs dfsadmin -decommission datanodename   关闭某个datanode节点hdfs version   查看hdfs版本hdfs dfs -setrep -w  副本数 -R path   设置文件的副本数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>1.6hdfs文件系统运维命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">start-dfs.sh   启动namenode、datanode,启动文件系统stop-dfs.sh    关闭文件系统start-yarn.sh  启动resourcemanager、nodemanagerstop-yarn.sh   关闭resourcemanager、nodemanagerstart-all.sh   启动hdfs、yarnstop-all.sh    关闭hdfs、yarnhdfs-daemon.sh start datanode    单独启动datanodestart-balancer.sh -t <span class="token number">10</span>%   启动负载均衡，尽量不要在namenode节点使用hdfs namenode -format 格式化文件系统hdfs namenode -upgrade  分发新的hdfs版本之后，namenode应以upgrade选项启动hdfs namenode -rollback 将namenode回滚到前一版本<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-hadoop常用命令"><a href="#2-hadoop常用命令" class="headerlink" title="2.hadoop常用命令"></a>2.hadoop常用命令</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hadoop fs -help   查看帮助hadoop fs -mkdir <span class="token function">dir</span>   创建文件夹hadoop fs -rmdir <span class="token function">dir</span>   删除文件夹dirhadoop fs -ls 查看目录文件信息hadoop fs -df<span class="token punctuation">[</span>-h<span class="token punctuation">]</span> URI  查看整个文件系统剩余空间hadoop fs -put <span class="token operator">&lt;</span>from<span class="token operator">&gt;</span><span class="token operator">&lt;</span>to<span class="token operator">&gt;</span>或hadoop fs -copyFromLocal<span class="token operator">&lt;</span>from<span class="token operator">&gt;</span><span class="token operator">&lt;</span>to<span class="token operator">&gt;</span>或hadoop fs -moveFromLocal<span class="token operator">&lt;</span>from<span class="token operator">&gt;</span><span class="token operator">&lt;</span>to<span class="token operator">&gt;</span>hadoop fs -cp /T00/FOC/T2001.csv /T00/FOC/T2001.dathadoop fs -checksum URIhadoop fs -appendToFile T2001.dat /T00/FOC/T2001.dathadoop fs -cat<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>    查看文件hadoop fs -text<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>   查看文件末尾的内容hadoop fs -du -s -h /T00/FOC/T2001.dathadoop fs -find / -name T2001.csv -print<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="三-Hbase的管理"><a href="#三-Hbase的管理" class="headerlink" title="三.Hbase的管理"></a>三.Hbase的管理</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Hbase shell  进入hbase<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>1.查询服务器状态</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:056:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> versionhbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:056:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>status<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>2.DDL操作</p><p>2.1表的增删改查</p><pre class="line-numbers language-none"><code class="language-none">create '表名称'，‘列名称1’，‘列名称2’，‘列名称N’  创建表put '表名'，‘行名’，‘列名’，‘值’       添加记录alter '表名'，NAME='列名'   增加列名get '表名'，‘行名’    查看记录count '表名'    查看表中的记录总数delete '表名'，‘行名称’，‘列名称’  删除记录disable '表名称'   删除表的第一步（先要屏蔽该表，才能对该表进行删除）drop '表名称'   删除表的第二步scan '表名称'    查看所有记录scan '表名称'，[‘列名称’]    查看某个列中所有数据truncate '表名'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.2.查看所有表</p><pre class="line-numbers language-none"><code class="language-none">hbase(main):056:0&gt;listhbase(main):056:0&gt;user<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>2.3.查看表描述</p><pre class="line-numbers language-none"><code class="language-none">hbase(main):056:0&gt;describe '表名'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.4.判断表是否enable或disable</p><pre class="line-numbers language-none"><code class="language-none">hbase(main):056:0&gt;is_enable '表名'hbase(main):056:0&gt;is_disable '表名'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>推荐学习网站</p><p><a href="http://c.biancheng.net/view/6541.html">http://c.biancheng.net/view/6541.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> hadoop hbase zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟化技术</title>
      <link href="2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/"/>
      <url>2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/</url>
      
        <content type="html"><![CDATA[<h3 id="一-虚拟机中三台主机不同网段的通信"><a href="#一-虚拟机中三台主机不同网段的通信" class="headerlink" title="一.虚拟机中三台主机不同网段的通信"></a>一.虚拟机中三台主机不同网段的通信</h3><pre class="line-numbers language-tex" data-language="tex"><code class="language-tex">题目：有三台主机：A、B、C，实现A与B通，A与C通，B与C不通实现方法：HostA用两张网卡，HostB和HostC分别用HostA中的网卡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-tex" data-language="tex"><code class="language-tex">步骤:1.添加和设置网卡设置不同网段可通过修改DHCP(先修改子网Ip，再修改DHCP，修改起始网段)这里添加了两张网卡--Vmnet2和Vmnet3,并将网段修改位192.168.100.0，192.169.200.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-15%20155807.png"></p><pre class="line-numbers language-tex" data-language="tex"><code class="language-tex">2.配置网卡给HostA主机配置Vmnet2和Vmnet3(设置里配置)给HostB主机配置Vmnet2给HostC主机配置Vmnet3注意：HostB和HostC主机里不能有NET模式的网卡，否则HostB和HostC就能实现通信<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-15%20155151.png"></p><p><img src="/2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-15%20155446.png"></p><p><img src="/2020/10/15/xu-ni-hua-ji-zhu-vmware-workstation-pro/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-15%20155333.png"></p><pre class="line-numbers language-tex" data-language="tex"><code class="language-tex">3.将三台主机的防火墙关闭4.ping(测试)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 虚拟化 Windows7x64 笔记 VMware Workstation Pro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据通信</title>
      <link href="2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/"/>
      <url>2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/</url>
      
        <content type="html"><![CDATA[<blockquote><p>局域网互联建设</p><p>承载骨干网建设</p></blockquote><h2 id="一-局域网互联建设"><a href="#一-局域网互联建设" class="headerlink" title="一.局域网互联建设"></a>一.局域网互联建设</h2><h3 id="实验一-二层交换机"><a href="#实验一-二层交换机" class="headerlink" title="实验一 二层交换机"></a>实验一 二层交换机</h3><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">实现两个交换机之间的通信关键的是给两个交换机开通vlan,配置vlan的接口为主机的后一位<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">配置交换机 （左）Switch<span class="token operator">&gt;</span>en    进入特权模式Switch<span class="token comment">#conf t    进入配置模式</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10    创建vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit </span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 20    创建vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/5  开通vlan 10 和vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk       封装    使用trunk模型</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/1   配置host1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access   使用access模型</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/2   配置host2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/3   配置host3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/4   配置host4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>配置交换机（右）Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20164432.png"></p><h3 id="实验二-三层交换"><a href="#实验二-三层交换" class="headerlink" title="实验二  三层交换"></a>实验二  三层交换</h3><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">路由可以实现不同网段间主机的通信（网关）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token operator">&gt;</span>en  进入特权模式Router<span class="token comment">#conf t   进入配置模式</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface g 0/0    配置路由接口 0/0  路由的接口是从0开始的</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown     启动路由</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0   添加网关和子网掩码</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit            退出</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g 0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20155434.png"></p><p>查看的和保存信息的相关命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token comment">#write  保存     保存后重启服务</span>Router<span class="token comment">#show vlan   查看vlan</span>Router<span class="token comment">#show run    查看当前运行信息</span>Router<span class="token comment">#show arp    查看arp</span>Router<span class="token comment">#show ip route  查看ip route</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验三-三层路由"><a href="#实验三-三层路由" class="headerlink" title="实验三   三层路由"></a>实验三   三层路由</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">配置交换机左Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 100       创建vlan 100</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 200       创建vlan 200</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/3   配置交换机，将vlan 100 和vlan 200 开通</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk    封装  使用trunk模型</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 100,200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/1   配置host1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access  使用access模型</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 100   将host1划分到vlan 100</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/2   配置host2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 200   将host2划分到vlan 200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>配置交换机右Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 100</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 200</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fastEthernet 0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 100,200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 100</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>配置三层交换机方法一:在三层交换机上创建新端口，将所有vlan都封装进去Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 100     创建vlan 100</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 200     创建vlan 200</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa 0/3  配置路由交换机</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q  封装   由于路由交换机的限制，不能直接使用trunk,需先开通 </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk      </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 100,200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 100         在三层路由中采用虚拟vlan 配置（注意这里进入到“配置模式“进行配置）</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0   添加网关和子网掩码</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing   启动路由（配置模式）</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>方法二:单独配置f0/1,f0/2端口Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 100 </span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 200</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q  封装   由于路由交换机的限制，不能直接使用trunk,需先开通 </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk      </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 100,200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q  封装   由于路由交换机的限制，不能直接使用trunk,需先开通 </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk      </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 100,200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-14%20190423.png"></p><h3 id="实验四-三层交换机链路聚合"><a href="#实验四-三层交换机链路聚合" class="headerlink" title="实验四 三层交换机链路聚合"></a>实验四 三层交换机链路聚合</h3><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">端口聚合概念：端口聚合又称聚合端口，聚合链路，以太通道（EtherChannel）。他是把同一台交换机上多个特性相同的物理端口捆绑在一起，形成一个逻辑的端口。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">***********************vlan和路由配置*********************二层交换机（左）Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1             创建聚合端口</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/3                       将物理端口f0/3加入到端口中，端口模型的选择可以用‘?’来查看并选择</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/4                       将物理端口f0/3加入到端口中，端口模型的选择可以用‘?’来查看并选择</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk                 封装</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20   因为左边vlan有10，20，不需要将所有的vlan都加进去</span>Switch<span class="token comment">#show etherchannel port-channel </span>Switch<span class="token comment">#show etherchannel summary </span>二层交换机（右）Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token comment">#show etherchannel port-channel </span>Switch<span class="token comment">#show etherchannel summary </span>三层交换机Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.18.4.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ad</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>三层交换机（因为有两个交换机，所以需配置两个链路聚合接口）三层交换机配置主机Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface port-channel 1            创建聚合端口1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/1                    </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/3                 选择什么样的物理端口加入聚合端口取决于与路由器左右相连的console线的接口</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q   封装</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 2                创建聚合端口2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 2 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 2 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q  封装</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Switch<span class="token comment">#show etherchannel port-channel </span>Switch<span class="token comment">#show etherchannel summary </span>三层交换机聚合接口号与二层交换机的聚合端口号无关<span class="token comment">#注意：在查看主机间是否ping通之前，先在二层交换机和三层交换机上查看端口是否配置正确，这样可以预先排除错误</span>no shut  <span class="token comment">#开启端口，需进入对应的端口</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-16%20124100.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-16%20124135.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-16%20124157.png"></p><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">这里只需有P就表示配置成功<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-16%20124306.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-21%20000830.png"></p><h3 id="实验五-单臂路由"><a href="#实验五-单臂路由" class="headerlink" title="实验五 单臂路由"></a>实验五 单臂路由</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">交换机Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter f0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>路由Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0       开启f0/0的路由，因为这里只有一个端口，所以只需配置一个，路由是从0开始的</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown   开启</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1     配置f0/0端口下的子端口f0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10       封装  因为f0/0.1是vlan 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2      配置f0/0端口下的子端口f0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20       封装  因为f0/0.2是vlan 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-16%20161621.png"></p><h3 id="实验六-IP路由基础–静态路由"><a href="#实验六-IP路由基础–静态路由" class="headerlink" title="实验六 IP路由基础–静态路由"></a>实验六 IP路由基础–静态路由</h3><p>思路：当前路由访问目标主机的ip网段、子网掩码、下一跳的路由地址</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">**********************配置Router0静态路由配置*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0            配置路由ip地址</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.3.0 255.255.255.0 12.1.1.2    访问Router1下面的主机PC3</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.4.0 255.255.255.0 12.1.1.2    访问Router2下面的主机PC4   下一跳的地址不变</span>**********************配置Router1静态路由配置*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2                              给路由配置不同网段的ip，以实习现多个路由的通信</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.1.0 255.255.255.0 12.1.1.1   访问Router0下的PC1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.2.0 255.255.255.0 12.1.1.1   访问Router0下的PC2</span>Router<span class="token punctuation">(</span>config <span class="token punctuation">)</span><span class="token comment">#ip route 192.168.4.0 255.255.255.0 12.1.2.2   访问Router2下的PC4 访问PC4时，下一跳的路由地址是12.1.2.2</span>**********************配置Router2静态路由配置*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0 </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.3.0 255.255.255.0 12.1.2.1   访问Router1下的PC3</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.1.0 255.255.255.0 12.1.2.1   访问Router0下的PC1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.2.0 255.255.255.0 12.1.2.1   访问Router0下的PC2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-21%20130336.png"></p><h3 id="实验七-IP路由基础–默认路由"><a href="#实验七-IP路由基础–默认路由" class="headerlink" title="实验七 IP路由基础–默认路由"></a>实验七 IP路由基础–默认路由</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">****************************Router1配置******************************************交换机配置******************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>********************单臂路由和默认路由配置*********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0                             </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.1.1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.2.2</span>*********************Router0默认路由配置***********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.1.0 255.255.255.0 12.1.1.1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.4.0 255.255.255.0 12.1.2.2</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route</span>**********************Router2默认路由配置**********************Router2配置Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.2.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-29%20095010.png"></p><h3 id="实验八-远程登录"><a href="#实验八-远程登录" class="headerlink" title="实验八 远程登录"></a>实验八 远程登录</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#enable password 123     #配置enable密码</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#line vty 0 5            #vty有0-15，可通过line vty ?查看</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#password 123      #配置远程登录密码</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#login</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Prompt端远程登录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">PC<span class="token operator">&gt;</span>ping <span class="token number">192.168</span>.1.254             <span class="token comment">#测试设备是否可以ping通</span>PC<span class="token operator">&gt;</span>telnet <span class="token number">192.168</span>.1.254           <span class="token comment">#远程登录</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20105740.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20115339.png"></p><h3 id="实验九-DHCP配置"><a href="#实验九-DHCP配置" class="headerlink" title="实验九 DHCP配置"></a>实验九 DHCP配置</h3><p>什么是DHCP？</p><p>DHCP(Dynamic Host Configuration Protocol)是一种动态的向Internet终端提供配置参数的协议。在终端提出申请之后，DHCP可以向终端提供IP地址、网关、DNS服务器地址等参数</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">***********************简单的DHCP配置***************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inte g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool poo11             #创建一个dhcp池，池的名称自定义</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0 255.255.255.0   #配置192.168.1.0的网段和子网掩码</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.1.254        #配置网关</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 0.0.0.0      #配置dns</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20110722.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20110606.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">********************三层路由交换机不同网段的DHCP配置*************************************二层交换机的配置********************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/5</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>****************三层路由交换机的配置*****************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/5</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>*******************DHCP的配置**************************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool pool1</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0 255.255.255.0</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.1.254</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool pool2</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0 255.255.255.0</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.2.254</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Switch<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20113715.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-30%20113516.png"></p><h3 id="实验十-综合"><a href="#实验十-综合" class="headerlink" title="实验十 综合"></a>实验十 综合</h3><p>中间主机的：</p><p>DHCP的配置是在所需要配置主机的vlan里面加入helper-address,DHCP的网络配置是在其相邻的路由或三层交换机上进行配置的</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">****************************swtich0配置****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>*****************************switch1配置****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1 </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40</span>******************************switch2配置*************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>***********************************Route0配置*************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.1.2</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool 1921683                         #dhcp</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.3.0 255.255.255.0</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.3.254</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#ping 12.1.1.2</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#enable password 123       #远程</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#line vty 0 5</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#password 12</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#password 123</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#login</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#end</span>***********************************Route1配置***********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inte g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.5.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.6.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool 1921685</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.5.0 255.255.255.0</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.5.254 </span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool 1921686</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.6.0 255.255.255.0</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.6.254</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.2.1        #默认路由</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip dhcp pool 1921684</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#network 192.168.4.0 255.255.255.0</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#default-router 192.168.4.254</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#dns-server 8.8.8.8</span>Router<span class="token punctuation">(</span>dhcp-config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#ping 12.1.2.1         </span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#enable password 123</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#line vty 0 5</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#pass</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#password 123</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#login</span>Router<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#end</span>*****************************三层交换机配置*****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exi</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing          </span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1                           #端口聚合</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter port-channel 1 </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 100</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#vlan 200</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 100</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0            #交换机配置地址</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 100</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 200</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.1 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 200</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.1.0 255.255.255.0 12.1.1.1</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.2.0 255.255.255.0 12.1.1.1</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.5.0 255.255.255.0 12.1.2.2</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.6.0 255.255.255.0 12.1.2.2</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 12.1.1.1       #dhcp</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 12.1.2.2       #dhcp</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#enable password</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#line vty 0 5</span>Switch<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#password 123</span>Switch<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#login</span>Switch<span class="token punctuation">(</span>config-line<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-09%20195215.png"></p><p>路由器和三层交换机之间的通信也可以通过在接口中“no switchport”将交换机实现路由器操作的功能</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.1 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.1.0 255.255.255.0 12.1.1.1</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.2.0 255.255.255.0 12.1.1.1</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.5.0 255.255.255.0 12.1.2.2</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 192.168.6.0 255.255.255.0 12.1.2.2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验十一-服务器DHCP配置"><a href="#实验十一-服务器DHCP配置" class="headerlink" title="实验十一 服务器DHCP配置"></a>实验十一 服务器DHCP配置</h3><p>服务器DHCP的配置是将 helper-address的目标地址直接指向服务器的ip地址</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*****************************Switch0*************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>***************************Switch1**********************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 50</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40,50</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 50</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**********************三层交换机<span class="token punctuation">(</span>Switch0<span class="token punctuation">)</span>**************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.1.2</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Switch<span class="token comment">#ping 12.1.1.2</span>Switch<span class="token comment">#ping 172.16.1.1</span>*****************************DHCP*************************Switch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 12.1.1.2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 172.16.1.1     </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 172.16.1.1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>***********************三层交换机<span class="token punctuation">(</span>Switch1<span class="token punctuation">)</span>*******************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 50</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40,50</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 50</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 172.16.1.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 12.1.1.1</span>***************************DHCP配置**************************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip help</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 172.16.1.1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip help</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip helper-address 172.16.1.1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>服务器配置好DHCP的网络</p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-13%20120139.png"></p><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-13%20120559.png"></p><h3 id="实验十二-RIP"><a href="#实验十二-RIP" class="headerlink" title="实验十二 RIP"></a>实验十二 RIP</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Switch <span class="token number">0</span>Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch <span class="token number">1</span>Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 40</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 30,40</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router <span class="token number">0</span>Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf </span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip          #rip 配置</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0</span>Router1Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 30</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 40</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip  #rip配置</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-13%20114154.png"></p><h3 id="实验十三-RIP-2"><a href="#实验十三-RIP-2" class="headerlink" title="实验十三 RIP-2"></a>实验十三 RIP-2</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*************************Router0***********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>************************Router1********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.4.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>***********************Router2********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.3.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>***********************Router3********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.4.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.3.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-18%20192400.png"></p><h3 id="二-承载骨干网建设"><a href="#二-承载骨干网建设" class="headerlink" title="二.承载骨干网建设"></a>二.承载骨干网建设</h3><h3 id="实验十四-ACL（Standard）"><a href="#实验十四-ACL（Standard）" class="headerlink" title="实验十四 ACL（Standard）"></a>实验十四 ACL（Standard）</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">**************************Switch1**********************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**************************Switch2**********************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>*****************************Router0*********************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#access-list 1 deny 192.168.1.1 0.0.0.0    #限制目标主机host1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#access-list 1 permit any          #对所有主机进行开通</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1  </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip access-group 1 in          #进入该主机的接口，采用”int“</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">方法二Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1 </span>Switch<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.1.0 0.0.0.255  #控制192.168.1.0网段的通信</span>Switch<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.1.1 0.0.0.0    #控制某台主机的通信</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#access-list 1 deny 192.168.1.0 0.0.0.255 #控制192.168.1.0网段的通信</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id=""><a href="#" class="headerlink" title=""></a><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-20%20155301.png"></h3><h3 id="实验十五-ACL-Extended"><a href="#实验十五-ACL-Extended" class="headerlink" title="实验十五 ACL(Extended)"></a>实验十五 ACL(Extended)</h3><p>PC0 可以与PC2通信，不可以与PC3通信 </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">***************************Switch0*************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>***************************Switch1*************************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>****************************Router0************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list extended 100</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip host 192.168.1.1 host 192.168.3.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny ip host 192.168.1.1 host 192.168.4.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show access-lists </span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 100 in    #此时g0/0.1端口为输入端（源ip）</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>两种写法等价</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip host 192.168.1.1 host 192.168.3.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip 192.168.1.1  0.0.0.0 192.168.3.1 0.0.0.0 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>PC0 可以与PC2通信，不可以与PC3通信 </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list extended 100</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip host 192.168.1.1 host 192.168.3.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny ip host 192.168.1.1 host 192.168.4.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show access-lists </span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 100 out  #此时g0/1.1为输出端(目的ip)</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip ac</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 100 out</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show access-lists </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>PC2与PC0通信，PC3与PC0通信n</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list extended 100</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip host 192.168.3.1 host 192.168.1.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny ip host 192.168.4.1 host 192.168.1.1</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show access-lists </span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 100 out #此时g0/1.1为输出端(目的ip)</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-25%20123147.png"></p><h3 id="实验十六-ACL（远程控制）"><a href="#实验十六-ACL（远程控制）" class="headerlink" title="实验十六 ACL（远程控制）"></a>实验十六 ACL（远程控制）</h3><p>题目：</p><p>1.路由器开启远程登录</p><p>2.PC0/PC2可以ping通路由器，但是不可以远程登录路由器</p><p>3.PC1/PC3可以远程登录路由器，也可以ping通路由器</p><p>注：telnet 类属于tcp ，端口号：23</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*******************************Switch0****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>*******************************Switch1****************************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>*******************************Router0****************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list extended 120</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny tcp host 192.168.1.1 host 192.168.1.254 eq telnet </span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny tcp host 192.168.1.1 host 192.168.3.254 eq telnet </span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny tcp host 192.168.3.1 host 192.168.3.254 eq telnet </span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny tcp host 192.168.3.1 host 192.168.1.254 eq telnet </span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#permit ip any any </span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show access-lists </span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 120 in （源ip）</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 120 in (源ip)</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-11-25%20201543.png"></p><h3 id="实验十七-NAT网络地址转换"><a href="#实验十七-NAT网络地址转换" class="headerlink" title="实验十七 NAT网络地址转换"></a>实验十七 NAT网络地址转换</h3><p>路由交换机</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">****************************************基础配置*******************************************************************Switch <span class="token number">1</span>****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**********************************路由交换机****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>*************************************Switch2****************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>*************************************Router1*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>**************************PC7Ping通12.1.1.2**************************************NAT接口配置***************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1</span>Switch<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.1.0 0.0.0.255</span>Switch<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source list 1 interface fa0/2</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Switch<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>*************************PC8ping通12.1.1.2**************************************静态NAT配置****************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source static 192.168.2.1 12.1.1.3</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 20</span>Switch<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Switch<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>*************************PC9ping通12.1.1.1***************************************NAT地址池配置*************************Router0*********Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.3.1 0.0.0.0 </span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat pool testnet 12.1.1.2 12.1.1.5 netmask 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source list 2 pool testnet</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat inside</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-03%20173403.png"></p><p>路由器</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">***************************基础配置******************************Switch <span class="token number">1</span>Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>****************************Router0***************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**************************Switch2*********************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**************************Router1*************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>****************PC7Ping通12.1.1.2****************************************接口NAT配置***********************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.1.0 0.0.0.255</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source list 1 interface g0/1</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>*****************PC8ping通12.1.1.2**************************************静态NAT配置************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source static 192.168.2.1 12.1.1.3</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>****************PC9ping通12.1.1.1*****************************************NAT地址池配置**********************************Router0********************Router0*********Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.3.1 0.0.0.0 </span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat pool testnet 12.1.1.2 12.1.1.5 netmask 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source list 2 pool testnet</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat inside</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show <span class="token function">ip</span> nat translations    <span class="token comment">#查看ip nat</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-03%20173210.png"></p><h3 id="实验十八-综合实训2"><a href="#实验十八-综合实训2" class="headerlink" title="实验十八 综合实训2"></a>实验十八 综合实训2</h3><p>要求:</p><p>PC7/PC6/PC8/PC9/PC10/PC11通过服务器server获取动态ip地址</p><p>PC10/PC11通过ACL机制不可以访问PC12</p><p>PC6/PC7/PC8/PC9设置nat地址池，地址池个数10个</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*************************************Switch <span class="token number">0</span>*********************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 20</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#vlan 30</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#sw</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport ac</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/3</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/4</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 20</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/5</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/6</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 30</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/7</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10,20,30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>************************************Router0***********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no sh </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 10</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 20</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.3</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#encapsulation dot1Q 30</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.3.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no sh</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip  #rip 动态路由</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>*********************************DHCP配置*****************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip helper-address 192.168.4.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip helper-address 192.168.4.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.3</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip helper-address 192.168.4.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>*************************ACL--3.0网段不可以访问PC12***********************Router<span class="token comment">#conf t                   </span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list extended 100</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#deny ip 192.168.3.0 0.0.0.255 192.168.5.1 0.0.0.0</span>Router<span class="token punctuation">(</span>config-ext-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.3</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip access-group 100 in</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip access-list standard 1</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#permit 192.168.0.0 0.0.255.255</span>Router<span class="token punctuation">(</span>config-std-nacl<span class="token punctuation">)</span><span class="token comment">#exit</span>***********************nat 地址池配置**************************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat pool testpool 25.1.1.3 25.1.1.13 netmask 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip nat inside source list 1 pool testpool </span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip nat outside </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.1</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0.2</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat in</span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#ip nat inside </span>Router<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#exit</span>***********************************Router3******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>***********************************Router1******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.4.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>**********************************Router2*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.4.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.5.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.5.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>*********************************Router4********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.5.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.4.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.6.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router rip </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.5.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.6.0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>******************************Multilay Switch0***************************Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no switchport </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.6.2 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.1.5.254 255.255.255.0</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip routing</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route rip </span>Switch<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.6.0</span>Switch<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.5.0</span>Switch<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#end</span>Switch<span class="token comment">#show ip int brief   #查看配置的端口是否已经打开</span>************************************Switch <span class="token number">1</span>*****************************Switch<span class="token operator">&gt;</span>Switch<span class="token operator">&gt;</span>enSwitch<span class="token comment">#conf t</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#vlan 10</span>Switch<span class="token punctuation">(</span>config-vlan<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode access </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/2</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode trunk </span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk allowed vlan 10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-14%20231917.png"></p><h3 id="实验十九-OSPF-动态路由协议"><a href="#实验十九-OSPF-动态路由协议" class="headerlink" title="实验十九 OSPF(动态路由协议)"></a>实验十九 OSPF(动态路由协议)</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*********************************Router2*****************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip route</span>*********************************Router1****************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief </span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 0</span>********************************Router0****************************Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.4.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0 0.0.0.255 area 0</span>*******************************Router3*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.4.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-15%20214700.png"></p><p>OSPF常用命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Router<span class="token comment">#show ip ospf neighber     #查看邻居信息</span>Router<span class="token comment">#show ip ospf inter fa0/1   #查看接口信息</span>Router<span class="token comment">#debug ip ospf events  #查看路由状态信息</span>Router<span class="token comment">#clear ip ospf process #清空进程</span>Router<span class="token comment">#show ip ospf database #查看数据库描述信息</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验二十-OSPF-设置费用控制流向"><a href="#实验二十-OSPF-设置费用控制流向" class="headerlink" title="实验二十 OSPF-设置费用控制流向"></a>实验二十 OSPF-设置费用控制流向</h3><p>要求：</p><p>出去时从下方(g0/2)出,回来时从上方(g0/0)回</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">**************************************Router2***************************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show running-config </span>Router<span class="token comment">#show ip int brief </span>Router<span class="token comment">#conf t</span>******************************控制流向为g0/2为出方向****************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip os</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf co</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf cost 10    #设置费用</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip os</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf co</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf cost 20   #设置费用</span>*****************************************Router0***********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.4.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0 0.0.0.</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief </span>Router<span class="token comment">#show running-config </span>*****************************************Router1************************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief </span>Router<span class="token comment"># show running-config </span>*****************************************Router3***********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.4.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.2.0 0.0.0.</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip int brief </span>Router<span class="token comment">#show running-config </span>Router<span class="token comment">#conf t</span>*************************************控制返回时从g0/0出***************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip os</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf co</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf cost 10   #设置费用</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip os</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf co</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf cost 20   #设置费用</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-18%20131119.png"></p><h3 id="实验二十一-OSPF-分区1"><a href="#实验二十一-OSPF-分区1" class="headerlink" title="实验二十一 OSPF-分区1"></a>实验二十一 OSPF-分区1</h3><p>注意:主干网络为 area 0 </p><p>Loopback接口，也叫回环口，是一个逻辑的、虚拟的接口。</p><p>Loopback接口常用于： </p><p>​    模拟路由器的直连网段，可用于测试。 可用于设备管理（Loopback接口比较稳定）。 供其他协议使用，例如OSPF、BGP、MPLS等的Router-ID。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">****************************************Router2*********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface loopback 1    # 设置回环口</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 1.1.1.1 255.255.255.255   </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 1.1.1.1 0.0.0.0 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show running-config </span>Router<span class="token comment">#show ip route </span>****************************************Router0*************************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.1.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter loopback 1     # 设置回环口</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 2.2.2.2 255.255.255.255</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 2.2.2.2 0.0.0.0 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#route ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#redistribute connected     #重分布</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip route </span>*****************************************Router1*******************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.2.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/1</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.1 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/2</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.2.0 0.0.0.255 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 2</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter loopback 0      # 设置回环口</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 3.3.3.3 255.255.255.255</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 3.3.3.3 0.0.0.0 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#redistribute connected metric-type 1      #重分布</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token comment">#show ip route </span>*******************************************Router3**********************************Router<span class="token operator">&gt;</span>enRouter<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter g0/0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no sh</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 25.1.3.2 255.255.255.0</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter loopback 0     # 设置回环口</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 4.4.4.4 255.255.255.255</span>Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 25.1.3.0 0.0.0.255 area 2</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 4.4.4.4 0.0.0.0 area 0</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#end</span>Router<span class="token comment">#show ip route ·</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-12-18%20141037.png"></p><h3 id="实验二十二-OSPF-分区2"><a href="#实验二十二-OSPF-分区2" class="headerlink" title="实验二十二  OSPF-分区2"></a>实验二十二  OSPF-分区2</h3><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-15%20114907.png"></p><p>1.末梢区域</p><p>在此区域的对端路由都要进行如下类似配置</p><p>配置Router0和Router3为末梢区域</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*************************Router0**********************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 stub   #将区域1设置为末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>************************Router3************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 stub   #将区域1设置为末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 21.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.完全末梢区域</p><p>在此区域的对端路由都要进行如下类似配置</p><p>配置Router0和Router3为完全末梢区域</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*************************Router0**********************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 stub no-summary  #将区域1设置为完全末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>************************Router3************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 stub no-summary  #将区域1设置为完全末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 21.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.虚链路</p><p>虚链路的配置路由是对不与骨干区域的路由配置的，但配置的两台路由需一台为骨干路由1，一台为与该路由相连同时与骨干区域相连的路由2(路由1和路由2都要进行如下类似配置)</p><p>如:router4与骨干区域建立虚链路</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*************************Router0**********************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 virturval-link 对端loopback的ip地址   #将区域1设置为末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 12.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span>************************Router3************************Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1  </span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 virturval-link 对端loopback的ip地址   #将区域1设置为末梢区域</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 21.1.1.0 0.0.0.255 area 1</span>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验二十三-HSRP-热备份路由器协议"><a href="#实验二十三-HSRP-热备份路由器协议" class="headerlink" title="实验二十三 HSRP(热备份路由器协议)"></a>实验二十三 HSRP(热备份路由器协议)</h3><p><img src="/2020/09/30/shu-ju-tong-xin-shi-yan-bi-ji/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-15%20115958.png"></p><p>对PC0进行热备份</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">**********************Switch2***********************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 ip 192.168.1.254  #启用HSRP功能，1为standby的组号，192.168.1.254为虚拟IP地址，相同组号的路由器属于同一个HSRP组，所有属于同一个HSRP组的路由器的虚拟地址必须一致</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 priority 120  #配置HSRP的优先级，如果不设置该项，缺省优先级为100，该值越大抢占为活动路由的优先权越高</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 preempt  #该设置允许路由器在优先级是最高是成为活动路由器，如果不设置，即使该路由器权值再高，也可能不会成为活动路由器</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 track fa0/1 30 #跟踪的是fa 0/1 接口故障，优先级降低30，默认降低30，模拟软件PT只支持10</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span>**********************Switch3************************Switch<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#inter fa0/1</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 ip 192.168.1.254</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 priority 120</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 preempt</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#standby 1 track fa0/1 30</span>Switch<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试</p><p>将Switch2宕机后，PC0仍然可以ping通</p>]]></content>
      
      
      
        <tags>
            
            <tag> 组网 实验 笔记 Cisco Packet Tracer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeper+Hadoop+Hbase整合平台搭建（伪分布模式）</title>
      <link href="2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/"/>
      <url>2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JDK的卸载与安装</p><p>Zookeeper的安装</p><p>Hadoop的安装</p><p>Hbase的安装</p></blockquote><h3 id="伪分布式平台架构"><a href="#伪分布式平台架构" class="headerlink" title="伪分布式平台架构"></a>伪分布式平台架构</h3><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/IMG_20200925_163341.jpg"></p><p>首先我们需要下载搭建平台所需要的资源包并放入指定文件目录下，这里博主将包放入了根目录下的software文件中。</p><p>资源获取地址：<a href="https://pan.baidu.com/s/1EW8t5szEkG-1Uk6iqeRQbQ">https://pan.baidu.com/s/1EW8t5szEkG-1Uk6iqeRQbQ</a>    提取码：2a3c</p><p>通过xftp 6 将资源包传输到  /software  目录下</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20152213.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20152233.png"></p><p>我们可以在CentOS系统里查看传输好的文件</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20180819.png"></p><h3 id="一-JDK的卸载与安装"><a href="#一-JDK的卸载与安装" class="headerlink" title="一.JDK的卸载与安装"></a>一.JDK的卸载与安装</h3><p>从普通用户进入root 用户，在root用户卸载java（为了方便起见，博主将用户名设为hadoop,请不要与下面的hadoop用户混淆)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote~<span class="token punctuation">]</span><span class="token variable">$su</span> - root<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20165058.png"></p><ul><li>卸载jdk</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -qa|grep jdk      查看jdk包</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -qa|grep java     查看java包</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -e java-XXXX      用rpm命令删除包</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#yum remove java-XXXX  用yum命令删包，有些包会报“依赖项错误”，这时用yum就可以解决问题</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>首先查看系统中的jdk包,发现有4个压缩包，我们要做的就是将它们删除</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#rpm -qa|grep jdk</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20155453.png"></p><p>删除jdk包，rpm  -e + 包名，最好是一个一个删除，不要用  rpm -e *  或   yum remove *   一次性将包删除，一次性删除可能会导致后面坏境的搭建出错</p><p>用   rpm -e + 包名，发现报错，此时用yum remove + 包名（推荐）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#yum remove java-XXXX</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20155642.png"> </p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20155806.png"></p><p>​         删除完后，用   rpm -qa|grep jdk 会发现输出为空，说明jdk压缩包已删除</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20160025.png"></p><p>​          重复上述步骤删除java包</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20160053.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20160232.png"></p><ul><li>安装jdk</li></ul><p>卸载完jdk和java后，我们在root用户下新建java目录,并进入java目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#mkdir /java</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#cd /java</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>我们可以查看传到/software目录下压缩包</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20161935.png"></p><p>接下来就是解压software目录下的  jdk-8u201-linux-x64.tar.gz</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote java<span class="token punctuation">]</span><span class="token comment">#tar -zxf /software/jdk-8u201-linux-x64.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20162002.png"></p><ul><li>修改java坏境变量</li></ul><p>进入hadoop用户，如果诸位系统中没有hadoop用户，可以新建一个hadoop用户,用 useradd hadoop,这样的好处就是当我们需要进行hadoop相关操作时就可以进入该用户，不需要再找了，同时也避免将其框架弄坏。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote java<span class="token punctuation">]</span><span class="token comment">#su - hadoop</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开  .bash_profile 配置文件，添加java环境变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> .bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">#Java environmentJAVA_HOME=/java/jdk1.8.0_201PATH=$JAVA_HOME/bin:$PATHexport JAVA_HOME CLASSPATH PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20161157.png"></p><p>source 文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$source</span> .bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输入java -version,如果出现图片中的信息，说明配置成功。否则删除root下的java文件，重新进行配置</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-25%20162112.png"></p><h3 id="二-Zookeeper的安装"><a href="#二-Zookeeper的安装" class="headerlink" title="二.Zookeeper的安装"></a>二.Zookeeper的安装</h3><ul><li>zookeeper软件包解压</li></ul><p>从hadoop用户退出，进入root用户</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#su - root</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在根目录下创建zookeeper目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#mkdir /zookeeper</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#cd /</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>将zookeeper的权限变更给hadoop</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#chown hadoop /zookeeper</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>进入hadoop用户并切换到zookeeper目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#su - hadoop</span><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$cd</span> /zookeeper<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在当前目录下解压缩zookeeper包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$tar</span> -zxf /software/zookeeper-3.4.13.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>zookeeper坏境变量设定</li></ul><p>配置zookeeper的环境变量，将下面的变量添加进去</p><p>“~”表示用户主目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$vi</span> ~/.bash_profile     进入.bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#zookeeper environment</span><span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/zookeeper/zookeeper-3.4.13<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ZOOKEEPER_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> ZOOKEEPER_HOME <span class="token environment constant">PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>source 文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$source</span> ~/.bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20164219.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20161754.png"></p><p>验证坏境变量是否配置成功</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token environment constant">$PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>zookeeper伪分布模式参数配置</li></ul><p>创建3个data和logs目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper1/data<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper2/data<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper3/data<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper1/logs<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper2/logs <span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$mkdir</span> -p zookeeper3/logs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20164412.png"></p><p>在3个data目录里创建myid文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token string">'1'</span> <span class="token operator">&gt;</span> zookeeper1/data/myid<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token string">'2'</span> <span class="token operator">&gt;</span> zookeeper2/data/myid<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token string">'3'</span> <span class="token operator">&gt;</span> zookeeper3/data/myid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20164436.png"></p><p>查看myid里的id是否一一对应</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$cat</span> zookeeper1/data/myid<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$cat</span> zookeeper2/data/myid<span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$cat</span> zookeeper3/data/myid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20164536.png"></p><p>进入zookeeper-3.4.13conf目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote zookeeper<span class="token punctuation">]</span><span class="token variable">$cd</span> /zookeeper/zookeeper-3.4.13/conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>用zoo_sample.cfg去生成zoo1.cfg的congfig文件，然后对zoo1.cfg文件进行修改与添加</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$cp</span> zoo_sample.cfg zoo1.cfg   复制<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$vi</span> zoo1.cfg    进入文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>将文件中的dataDir和clientPort两个参数注释掉，因为它们会影响后面的配置，同时将变量添加进去</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/zookeeper/zookeeper1/data      <span class="token comment">#指定Zookeeper的data路径</span><span class="token assign-left variable">dataLogDir</span><span class="token operator">=</span>/zookeeper/zookeeper1/logs   <span class="token comment">#指定Zookeeper的log路径</span><span class="token assign-left variable">clientPort</span><span class="token operator">=</span><span class="token number">2181</span>   <span class="token comment">#指定Client连接端口，对外唯一</span>server.1<span class="token operator">=</span>localhost:2888:3888     <span class="token comment">#指定server node，及其服务端口。localhost可切换为主机名</span>server.2<span class="token operator">=</span>localhost:2889:3889server.3<span class="token operator">=</span>localhost:2890:3890<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20173242.png"></p><p>复制zoo1.cfg生成zoo2.cfg zoo3.cfg</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$cp</span> zoo1.cfg zoo2.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$cp</span> zoo1.cfg zoo3.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$vi</span> zoo2.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$vi</span> zoo3.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意，要修改zoo2.cfg和zoo3.cfg的dataDir、dataLogDir和clientPort中的序号</strong></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20183431.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20183453.png"></p><p>启动服务</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh start zoo1.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh start zoo2.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh start zoo3.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20173515.png"></p><p>查看工作进程</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20173654.png"></p><p>查看工作状态</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh status zoo1.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh status zoo2.cfg<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$zkServer</span>.sh status zoo3.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20173718.png"></p><p>出现上述的查询结果说明zookeeper已经配置完成</p><h3 id="三-Hadoop的安装"><a href="#三-Hadoop的安装" class="headerlink" title="三.Hadoop的安装"></a>三.Hadoop的安装</h3><ul><li>hadoop 软件包解压</li></ul><p>切换到root的主目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$su</span> - root<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在根目录下创建hadoop目录，并将hadoop目录的权限给hadoop用户，然后切换到hadoop用户，进入hadoop目录，同时在当前目录下解压hadoop包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#mkdir /hadoop</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#cd /</span><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#chown hadoop /hadoop</span><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#su - hadoop</span><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$cd</span> /hadoop<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$tar</span> -zxf /software/hadoop-2.7.7.tar.gz <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>hadoop坏境变量设定</li></ul><p>添加hadoop环境变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> ~/.bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#hadoop environment</span><span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/hadoop/hadoop-2.7.7<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> HADOOP_HOME <span class="token environment constant">PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$source</span> ~/.bash_profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20174047.png"></p><p>验证配置是否成功</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token environment constant">$PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20174131.png"></p><ul><li>hadoop参数配置</li></ul><p>创建 tmp data name 三个文件目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$mkdir</span> tmp data name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置本机免密码登录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$cd</span> ~<span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$ssh</span>-keygen -t rsa   输入三个enter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20174238.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$cd</span>  .ssh <span class="token punctuation">[</span>hadoop@promote .ssh<span class="token punctuation">]</span><span class="token variable">$cp</span> id_rsa.pub authorized_keys<span class="token punctuation">[</span>hadoop@promote .ssh<span class="token punctuation">]</span>ls<span class="token punctuation">[</span>hadoop@promote .ssh<span class="token punctuation">]</span>ssh localhost    输入yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-27%20175032.png"></p><p>这时无需密码就可登录localhost</p><ul><li>修改 hadoop-env.sh、core-site.xml、hdfs-site.xml、mapred-site.xml、yarn-env.sh、yarn-site.xml文件</li></ul><p>进入/etc下的hadoop</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote .ssh<span class="token punctuation">]</span>cd ~<span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$cd</span> /hadoop/hadoop-2.7.7/etc/hadoop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>修改hadoop-env.sh和yarn-env.sh</p><p>因为这两个文件是环境变量文件，所以修改前建议先复制</p><p>修改文件的JAVA_HOME</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$cp</span> hadoop-env.sh hadoop-env.shark<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> hadoop-env.sh    --系统运行环境参数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20171532.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$cp</span> yarn-env.sh  yarn-env.shark<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> yarn-env.sh  --yarn环境参数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/java/jdk1.8.0_201   这里需去掉注释“<span class="token comment">#”</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20171751.png"></p><p>修改.xml文件</p><p>修改此类文件，只需将变量添加到<configuration><configuration>之间</configuration></configuration></p><p>修改core-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> core-site.xml   --指定Hadoop的访问路径，即Hadoop的主节点服务器及端口号<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">&lt;property&gt;&lt;name&gt;fs.defaultFS&lt;/name&gt;&lt;value&gt;hdfs://localhost:9000&lt;/value&gt;   #Hadoop 的访问路径&lt;/property&gt;&lt;property&gt;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&lt;value&gt;/hadoop/tmp&lt;/value&gt;           #Hadoop 本地临时存放路径&lt;/property&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改hdfs-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> hdfs-site.xml    --指定HDFS主要配置参数<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">&lt;property&gt;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;   #指定HDFS的主节点元数据文件的本地存放路径&lt;value&gt;/hadoop/name&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;  #指定HDFS的数据节点数据文件的本地存放路径&lt;value&gt;/hadoop/data&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;dfs.replication&lt;/name&gt;     #指定HDFS的数据分块的备份数量&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>用mapred-site.xml.template生成.xml文件并进行修改</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$cp</span> mapred-site.xml.template mapred-site.xml<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> mapred-site.xml  --指定MapReduce服务的配置<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">&lt;property&gt;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;   #指定MapReduce所使用的外部管理框架，值为yarn&lt;value&gt;yarn&lt;/value&gt;&lt;/property&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>修改 yarn-site.xml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$vi</span> yarn-site.xml    --yarn服务的配置<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">&lt;property&gt;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;    #指定NodeManager上运行的附属服务的类型&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&lt;/property&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20172226.png"></p><ul><li>Hadoop格式化，启动和验证</li></ul><p>格式化</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$hadoop</span> namenode -format<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里要找到status,如果status=0，则说明前面的配置成功，如果status非零，则前面存在错误。博主格式化时出现status=1的情况。遇到错误不要害怕，我们要学会查看信息。博主通过查看上面的错误日志，发现hdfs文件中<value>缺少“/”，于是将其补上就可以了</value></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20173503.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20174131.png"></p><p>启动</p><p>启动dfs和yarn</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$start</span>-dfs.sh<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$start</span>-yarn.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>jps查看工作进程，如果出现以下6个进程则说明配置对了，如果少一个或多个，则前面的配置出错。如果缺少namenode、datanode，应该是hdfs文件错误，如果缺少ResourceManager应该是yarn.site.xml文件错误。修改前需将dfs和yarn停掉,运行时再启动。如果前面的6个配置文件都没有错误，然后启动dfs和yarn,查看jps依然没有变化，可以将 /hadoop目录下的data、name文件删除，重新格式化</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span><span class="token variable">$jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20183129.png"></p><p>验证</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span>$ hadoop fs -mkdir /test<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span>$ hadoop fs -ls /<span class="token punctuation">[</span>hadoop@promote hadoop<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /hadoop/hadoop-2.7.7/share/hadoop/mapreduce<span class="token punctuation">[</span>hadoop@promote mapreduce<span class="token punctuation">]</span><span class="token variable">$ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20175754.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote mapreduce<span class="token punctuation">]</span>$ hadoop jar hadoop-mapreduce-examples-2.7.7.jar pi <span class="token number">2</span> <span class="token number">1000</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20174721.png"></p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-30%20174751.png"></p><p>到这里，hadoop就安装完成了。</p><h3 id="四-Hbase的安装"><a href="#四-Hbase的安装" class="headerlink" title="四.Hbase的安装"></a>四.Hbase的安装</h3><p>hbase的安装是基于zookeeper和hadoop的安装，所以在安装前确保zookeeper和hadoop都可以正常启动，切记，zookeeper和hadoop的启动不可以在root用户下启动，否则hbase安装失败</p><p>进入root 用户创建hbase目录，并将权限赋给hadoop</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$su</span> - root<span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#mkdir /hbase</span><span class="token punctuation">[</span>root@promote ~<span class="token punctuation">]</span><span class="token comment">#cd /</span><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#chown hadoop /hbase</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>进入hadoop用户，在hbase目录下解压缩资源包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@promote /<span class="token punctuation">]</span><span class="token comment">#su - hadoop</span><span class="token punctuation">[</span>hadoop@promote ~<span class="token punctuation">]</span><span class="token variable">$cd</span> /hbase<span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$ls</span><span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$tar</span> -zxf /software/hbase-1.2.10-bin.tar.gz <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>创建tmp和logs</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$mkdir</span> tmp logs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加hbase环境变量</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$vi</span> ~/.bash_profile <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">#hbase environmentHBASE_HOME=/hbase/hbase-1.2.10PATH=$HBASE_HOME/bin:$PATHexport HBASE_HOME<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>source 文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$source</span> ~/.bash_profile <span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$echo</span> <span class="token environment constant">$PATH</span>   查看hbase环境变量是否添加成功<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>修改hbase /conf 目录下的 hbase-env.sh和 hbase-site.xml文件</p><p>修改hbase-env.sh，将下面对应修改的地方添加进去</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote hbase<span class="token punctuation">]</span><span class="token variable">$cd</span> /hbase/hbase-1.2.10/conf/<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$cp</span> hbase-env.sh hbase-env.sh.bak<span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$vi</span> hbase-env.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki"># export JAVA_HOME=/usr/java/jdk1.6.0/export JAVA_HOME=/java/jdk1.8.0_201/# export HBASE_CLASSPATH=export HBASE_CLASSPATH=/hadoop/hadoop-2.7.7/etc/hadoop# export HBASE_LOG_DIR=${HBASE_HOME}/logsexport HBASE_LOG_DIR=/hbase/logs# Tell HBase whether it should manage it's own instance of Zookeeper or not.export HBASE_MANAGES_ZK=false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改hbase-site.xml文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$vi</span> hbase-site.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">&lt;property&gt;&lt;name&gt;hbase.rootdir&lt;/name&gt;    #指定HBase数据库的存放路径&lt;value&gt;hdfs://localhost:9000/user/root/hbase&lt;/value&gt;    #注：/user/root可根据自己路径进性修改&lt;/property&gt;                                                 &lt;property&gt;&lt;name&gt;hbase.tmp.dir&lt;/name&gt;  #指定HBase的元数据的本地存放路径&lt;value&gt;/hbase/tmp&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;  #指定HBase的分布式集群模式为开启状态&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;    #指定Zookeeper的连接地址，多个用“,”分隔&lt;value&gt;localhost:2181,localhost:2182,localhost:2183&lt;/value&gt;&lt;/property&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>启动habase</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$start</span>-hbase.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看进程</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span><span class="token variable">$jps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果出现如下进程，则hbase安装正确</p><pre class="line-numbers language-tiki" data-language="tiki"><div class="caption"><span>wiki</span></div><code class="language-tiki">9488 NameNode19313 QuorumPeerMain21763 Jps21477 HRegionServer18934 QuorumPeerMain19800 SecondaryNameNode19625 DataNode18987 QuorumPeerMain20107 NodeManager21388 HMaster19998 ResourceManager<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>hadoop@promote conf<span class="token punctuation">]</span>$ hbase shellhbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:001:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> create <span class="token string">'table（表名）'</span>,<span class="token string">'id'</span>,<span class="token string">'name'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-15%20092209.png"></p><p>到这里伪分布式平台搭建完毕！</p><h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><h5 id="登录hadoop网页"><a href="#登录hadoop网页" class="headerlink" title="登录hadoop网页"></a>登录hadoop网页</h5><p>在终端中输入ifconfig,查看系统的ip地址</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20163457.png"></p><p>打开火狐浏览器，输入ip地址，端口号为50070</p><p><img src="/2020/09/25/zookeeper-hadoop-hbase-zheng-he-ping-tai-da-jian-wei-fen-bu-mo-shi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-10-28%20163346.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Zookeeper Hadoop Hbase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客无法插入图片问题的解决</title>
      <link href="2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/"/>
      <url>2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/</url>
      
        <content type="html"><![CDATA[<blockquote><p>修改_config.yml配置文件</p><p>Typora偏好设置</p><p>插件安装</p><p>修改hexo-asset-image文件中index.js的内容</p><p>生成博客</p></blockquote><h3 id="一-修改-config-yml配置文件"><a href="#一-修改-config-yml配置文件" class="headerlink" title="一.修改_config.yml配置文件"></a>一.修改_config.yml配置文件</h3><p>以博主的博客为例，博主博客的位置为D:/MyBlogs</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> d:/MyBlogs    进入博客的根目录$ <span class="token function">vi</span> _config.yml   进入配置文件 ,输入i进入插入模式，此时可以改动文件内容，文件中的post_asset_folder 选项设为 <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20161052.png"></p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20161402.png"></p><p>post_asset_folder 的作用：</p><p>​        在git终端创建博客生成.md文件的同时，生成与其文件名相同的文件夹，该文件夹用来存放该篇博文的图片等资料</p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20162129.png"></p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20162150.png"></p><h3 id="二-Typora偏好设置"><a href="#二-Typora偏好设置" class="headerlink" title="二.Typora偏好设置"></a>二.Typora偏好设置</h3><p>打开Typora—&gt;文件—&gt;偏好设置—&gt;图像—&gt;复制到指定路径—&gt;./${filename}</p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20163057.png"></p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20163143.png"></p><p>作用：可以使得从网上copy一张图片粘贴进来时就可以自动保存到与md文件同名的文件夹里</p><h3 id="三-插件安装"><a href="#三-插件安装" class="headerlink" title="三.插件安装"></a>三.插件安装</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> https://github.com/CodeFalling/hexo-asset-image --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​         作用:实现md文件到html文件的转换，经hexo  g 重新生成后，会在public/日期/文件名的目录下生成index.html和图片文件</p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20162325.png"></p><h3 id="四-修改hexo-asset-image文件中index-js的内容"><a href="#四-修改hexo-asset-image文件中index-js的内容" class="headerlink" title="四.修改hexo-asset-image文件中index.js的内容"></a>四.修改hexo-asset-image文件中index.js的内容</h3><p>index.js文件在node_modules文件夹下，可以用notepad++打开</p><p><img src="/2020/09/24/hexo-bo-ke-wu-fa-cha-ru-tu-pian-wen-ti-de-jie-jue/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20164402.png"></p><p>将js中的代码替换成下面的代码</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">'use strict';var cheerio = require('cheerio');<span class="token comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span>function getPosition(str<span class="token punctuation">,</span> m<span class="token punctuation">,</span> i) <span class="token punctuation">{</span>  return str.split(m<span class="token punctuation">,</span> i).join(m).length;<span class="token punctuation">}</span>var version = String(hexo.version).split('.');hexo.extend.filter.register('after_post_render'<span class="token punctuation">,</span> function(data)<span class="token punctuation">{</span>  var config = hexo.config;  if(config.post_asset_folder)<span class="token punctuation">{</span>    var link = data.permalink;if(version.length &gt; <span class="token number">0</span> &amp;&amp; Number(version<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>) == <span class="token number">3</span>)   var beginPos = getPosition(link<span class="token punctuation">,</span> '/'<span class="token punctuation">,</span> <span class="token number">1</span>) + <span class="token number">1</span>;else   var beginPos = getPosition(link<span class="token punctuation">,</span> '/'<span class="token punctuation">,</span> <span class="token number">3</span>) + <span class="token number">1</span>;<span class="token comment">// In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".</span>var endPos = link.lastIndexOf('/') + <span class="token number">1</span>;    link = link.substring(beginPos<span class="token punctuation">,</span> endPos);    var toprocess = <span class="token punctuation">[</span>'excerpt'<span class="token punctuation">,</span> 'more'<span class="token punctuation">,</span> 'content'<span class="token punctuation">]</span>;    for(var i = <span class="token number">0</span>; i &lt; toprocess.length; i++)<span class="token punctuation">{</span>      var key = toprocess<span class="token punctuation">[</span>i<span class="token punctuation">]</span>;       var $ = cheerio.load(data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        ignoreWhitespace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        xmlMode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        lowerCaseTags<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        decodeEntities<span class="token operator">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>);      $('img').each(function()<span class="token punctuation">{</span>if ($(this).attr('src'))<span class="token punctuation">{</span><span class="token comment">// For windows style path, we replace '\' to '/'.</span>var src = $(this).attr('src').replace('\\'<span class="token punctuation">,</span> '/');if(!/http<span class="token punctuation">[</span>s<span class="token punctuation">]</span>*.*|\/\/.*/.test(src) &amp;&amp;   !/^\s*\<span class="token comment">//.test(src)) {</span>  <span class="token comment">// For "about" page, the first part of "src" can't be removed.</span>  <span class="token comment">// In addition, to support multi-level local directory.</span>  var linkArray = link.split('/').filter(function(elem)<span class="token punctuation">{</span>return elem != '';  <span class="token punctuation">}</span>);  var srcArray = src.split('/').filter(function(elem)<span class="token punctuation">{</span>return elem != '' &amp;&amp; elem != '.';  <span class="token punctuation">}</span>);  if(srcArray.length &gt; <span class="token number">1</span>)srcArray.shift();  src = srcArray.join('/');  $(this).attr('src'<span class="token punctuation">,</span> config.root + link + src);  console.info&amp;&amp;console.info(<span class="token string">"update link as:--&gt;"</span>+config.root + link + src);<span class="token punctuation">}</span><span class="token punctuation">}</span>else<span class="token punctuation">{</span>console.info&amp;&amp;console.info(<span class="token string">"no src attr, skipped..."</span>);console.info&amp;&amp;console.info($(this));<span class="token punctuation">}</span>      <span class="token punctuation">}</span>);      data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> = $.html();    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="五-生成博客"><a href="#五-生成博客" class="headerlink" title="五.生成博客"></a>五.生成博客</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo clean$ hexo g$ hexo s     预览  Ctrl+C可取消$ hexo d     放到github上<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> hexo 图片插入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10基于github的Hexo博客搭建及主题配置</title>
      <link href="2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/"/>
      <url>2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>nodejs和git安装</p><p>hexo博客搭建</p><p>将博客同步到github上</p><p>博客主题设置（以安装snark为例）</p><p>主题优化</p></blockquote><ul><li>小记：最近发现之前搭好的博客打不开了，花了好些时间解决bug,但是上网查了很多的博客依然没有解决，因此决定重新从零开始，借此机会将搭建过程写到博客里，以下为搭建hexo博客及设置主题的步骤与过程。</li></ul><h3 id="一-安装nodejs和git"><a href="#一-安装nodejs和git" class="headerlink" title="一.安装nodejs和git"></a>一.安装nodejs和git</h3><ul><li><p>git 下载: <a href="https://git-scm.com/">https://git-scm.com/</a></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20214044.png"></p></li><li><p>下载好后，右击鼠标就会出现git的标志，这就表明git已经安装好</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20214337.png"></p></li><li><p>nodejs下载 :<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></p><p>(博主是windows系统，根据自己电脑系统进行选择)</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20214653.png"></p></li><li><p>下载后双击node.exe安装即可</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20214956.png"></p></li><li><p>在git终端查看node、npm和git版本以此来判断git和nodejs是否安装成功，如下图可知，git和nodejs安装成功</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20175651.png"></p></li></ul><h3 id="二-hexo博客搭建"><a href="#二-hexo博客搭建" class="headerlink" title="二.hexo博客搭建"></a>二.hexo博客搭建</h3><ul><li><p>创建一个放置自己博客的文件夹（例如：Myblogs,这个目录就是博客的根目录），在Myblogs文件夹中右击鼠标，从中找到<strong>Git Bash Here</strong>选项，打开 git 窗口</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20215308.png"></p></li><li><p>安装hexo（时间可能很长，耐心等待~）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> i -g hexo-cli    使用全局安装<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20175807.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo init   初始化<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20180032.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo g   生成博客目录文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20180101.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo s   开启本地服务  Ctrl+C可取消预览<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20165724.png"></p></li></ul><ul><li><p>在浏览中打开” <a href="http://localhost:4000&quot;，可以看到博客已经在本地安装好">http://localhost:4000"，可以看到博客已经在本地安装好</a></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20190049.png"></p></li></ul><h3 id="三-将博客同步到github上"><a href="#三-将博客同步到github上" class="headerlink" title="三.将博客同步到github上"></a>三.将博客同步到github上</h3><ul><li><p>配置userName和email </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> config --global user.name<span class="token string">"userName"</span>    userName 是github的用户名$ <span class="token function">git</span> config --global user.email<span class="token string">"yourEmail"</span>  email是github的邮箱<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20182111.png"></p></li><li><p>生成密钥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> ~/.ssh      查看是否有.shh文件夹$ ssh-keygen -t rsa -C <span class="token string">"yourEmail"</span>    连续输入三个回车，生成密钥（密钥的存放路径是：C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator.ssh） <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20182801.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>ssh-agent -s<span class="token variable">)</span></span>"</span>     添加密钥到ssh-agent$ ssh-add ~/.ssh/id_rsa      添加生成的SSH key到ssh-agent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>创建仓库</p><p>新建一个仓库，仓库名为：<strong>username.github.io.git</strong>（例如，你的用户名为test，那么就是test.github.io.git）、选择public即可，勾选创建README</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20183119.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20183300.png"></p></li><li><p>生成密钥</p><p>点击右上角头像—&gt;setting —&gt; SSH and GPG keys —&gt; SSH keys,新建一个SSH key 将 C:\Users\Administrator.ssh 下的 id_rsa.pub文件里的内容复制上去(<strong>注：.pub文件用windows自带的软件无法打开，可以用notepad++打开</strong> )</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20183337.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20183523.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20184009.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ssh</span> -T git@github.com  <span class="token comment">#测试添加ssh是否成功。如果看到Hi后面是你的用户名，就说明成功了</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20185217.png"></p></li><li><p>安装hexo部署工具</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> i hexo-deployer-git --save<span class="token comment">#修改站点配置文件_config.yml（在你搭建博客的文件夹中找到_config.yml文件，修改deploy（在末尾））</span>$ <span class="token function">vi</span> _config.yml    进入vim编辑器,i--进入插入模式，此时方可改动文件，移动时可通过鼠标或上下键，退出时用 先按Esc,再输入  :wq   保存退出<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20185655.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20185809.png"></p></li><li><p>将本地的博客上传到github上</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> D:/MyBlogs   进入博客根目录$ hexo g   生成文件$ hexo s   打开本地服务器，在本地预览效果$ hexo d   将博客上传到github上（可能需要等几分钟才能够在网页上看到更新后的效果）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>可能会出Deployer not found :git,此时输入如下命令即可解决</strong></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20190131.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20191121.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20191139.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20191208.png"></p></li><li><p>此时可以看到github上生成了多个文件</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20235630.png"></p></li><li><p>浏览器中输入username.github.io就可以浏览，如博主的 sourcex99.github.io</p></li><li><p>至此，hexo博客的搭建以及关联github已经完成，接下来进行主题的设置</p></li></ul><h3 id="四-博客主题设置（以安装snark为例）"><a href="#四-博客主题设置（以安装snark为例）" class="headerlink" title="四.博客主题设置（以安装snark为例）"></a>四.博客主题设置（<strong>以安装snark为例</strong>）</h3><ul><li><p>找到你想要的主题  网址：<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>    或 github上搜 hexo-themes</p></li><li><p>找到到主题后，进入主题项目所在的地址 ：<a href="https://github.com/Litreily/hexo-theme-snark">https://github.com/Litreily/hexo-theme-snark</a>，根据README.md进行安装</p></li><li><p>切换到博客的根目录 cd D:/MyBlogs</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20001720.png"></p></li><li><p>Installation</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#查看主题的路径，snark是https://github.com/litreily/hexo-theme-snark.git themes/snark,这里已经显示themes了，</span><span class="token comment">#所以直接在根目录(如：D：/MyBlogs)里安装，如果没有这个，要切换到themes中进行安装 (cd /themes)</span>$ <span class="token function">git</span> clone https://github.com/litreily/hexo-theme-snark.git themes/snark$ <span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-pug --save$ <span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-sass --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#修改highlight</span>$ <span class="token builtin class-name">cd</span> D:/MyBlogs      进入博客根目录$ <span class="token function">vi</span> _config.yml     进入vim编辑器,找到highlight进行如下修改<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20194115.png"></p></li><li><p>修改博客名字、作者、theme(注意，配置文件一定要修改相对应的主题名称，否则博客用的还是默认的主题),修改完了 Esc(进入末行命令)  :wq  （保存后退出）</p><p> <img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20002123.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20003232.png"></p></li><li><p>添加支持包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new page archives$ hexo new page categories$ hexo new page tags$ hexo new page about<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>安装插件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save      用于RSS$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save    用于local search$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save   用于sitemap<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>生成博客</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo clean      清除缓存$ hexo g          生成博客      <span class="token comment">#一定要先生成</span>$ hexo d          关联仓库<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>到这里，博客的主题就设置好了，在此基础上，博主对主题进行了优化</p></li></ul><h3 id="五-主题优化"><a href="#五-主题优化" class="headerlink" title="五.主题优化"></a>五.主题优化</h3><ul><li><p>修改图片 ——在snark文件中找到source下的img,加入你想要的图片，修改图片的名称为：profile.jpg</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-24%20003842.png"></p></li><li><p>添加live2d </p><p>models 地址：<a href="https://github.com/xiazeyu/live2d-widget-models">https://github.com/xiazeyu/live2d-widget-models</a></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20200732.png"></p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20200754.png"></p></li><li><p>在<strong>_config.ym</strong>l配置文件中添加如下代码</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20200834.png"></p></li><li><p>生成博客</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo clean$ hexo g$ hexo s  （预览）$ hexo d   放到github上<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>浏览器中输入：userName.github.io （userName为自己github的用户名） ,最终博客如下</p><p><img src="/2020/09/24/windows10-ji-yu-github-de-hexo-bo-ke-da-jian-ji-zhu-ti-pei-zhi/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202020-09-23%20200917.png"></p></li></ul><p>参考博客:</p><p><a href="https://blog.csdn.net/f2764052703/article/details/86596957?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-4">https://blog.csdn.net/f2764052703/article/details/86596957utm_medium=distribute.pc_relevant.none-task-blog-baidujs-4</a></p><p><a href="https://blog.csdn.net/weixin_41160054/article/details/89473887">https://blog.csdn.net/weixin_41160054/article/details/89473887</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo 博客搭建 主题设置与优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/09/23/hello-world/"/>
      <url>2020/09/23/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
